/*****************************************************************************
 **
 ** @ngdoc overview
 ** @name app.js
 **
 ** @description
 ** main AngularJS application definition file - loads all plugins that will 
 ** be a part of the module.
 **
 ****************************************************************************/
// Global debug flag (passed to other modules)
//////////////////////////////////////////////////////////////////////////////
// Miscellaneous Calendar functions
//////////////////////////////////////////////////////////////////////////////
function getCalendarHTML(mo,yr,showToday){
// mo = zero-based month number
// yr = 4 digit year YYYY
// Create an array containing the month names
var M=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),D=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat"),dayOne=new Date(M[mo]+" 1,"+yr),dy=dayOne.getDay();yr=eval(yr);
// Days in each month
var d="312831303130313130313031";
// Is this leap year?
yr/4===Math.floor(yr/4)&&(d=d.substring(0,2)+"29"+d.substring(4,d.length));
// Calculate the position in the d string for this month
var pos=2*mo,ld=eval(d.substring(pos,pos+2)),tday=(new Date).getDate(),dow=(new Date).getDay(),htmlText='<table class="calTable"><tr>';
// Display the month and year
htmlText+='<th class="monHdr"',showToday&&(htmlText+=" hiLite"),htmlText+='" colspan=7 center>'+M[mo]+" "+yr+"</th></tr>",
// Display the days of the week
htmlText+="<tr>";for(var i=0;i<7;i++)htmlText+=i==dow&&showToday?'<td class="wkdayHdr hiLite">':'<td class="wkdayHdr">',htmlText+=D[i]+"</td>";htmlText+="</tr>";var ctr=0;
// Display the day of the month or a blank space
// for the first week of the month
for(
// Display the day of the month or a blank if the 1st falls in mid-week
htmlText+='<tr class="calDayRow">',i=0;i<7;i++)i<dy?htmlText+="<td> </td>":(ctr++,htmlText+=ctr==tday&&showToday?'<td class="hiLite">':"<td>",htmlText+=ctr+"</td>");for(htmlText+="</tr>",
// Display the day of the month for the rest of the month
// Display a blank after the last day of the month
htmlText+='<tr class="calDayRow">';ctr<=ld;){for(i=0;i<7;i++)ctr++,ctr>ld?htmlText+="<td> </td>":(htmlText+=ctr==tday&&showToday?'<td class="hiLite">':"<td>",htmlText+=ctr+"</td>");htmlText+='</tr><tr class="calDayRow">'}return htmlText+='</tr></table><br class="clear" /></div>'}function showCalenders(){var e=new Date,t=e.getMonth(),n=e.getYear()+1900,o=0===t?11:t-1,r=0===t?n-1:n,l=11===t?n+1:n,a=11===t?0:t+1,i=document.getElementById("calLastMon"),s=document.getElementById("calThisMon"),d=document.getElementById("calNextMon");i&&(i.innerHTML=getCalendarHTML(o,r,!1)),s&&(s.innerHTML=getCalendarHTML(t,n,!0)),d&&(d.innerHTML=getCalendarHTML(a,l,!1))}
//////////////////////////////////////////////////////////////////////////////
// Gather Screen Size Information
//////////////////////////////////////////////////////////////////////////////
function gebID(e){return document.getElementById(e)}function gebTN(e){return document.getElementsByTagName(e)}function setStyleToTags(e,t){for(var n=gebTN(e),o=0;o<n.length;o++)n[o].setAttribute("style",t)}function testSizes(e){null===e&&(e="body"),gebID("screen.Width").innerHTML=screen.width.toString(),gebID("screen.Height").innerHTML=screen.height.toString(),gebID("window.Width").innerHTML=window.innerWidth.toString(),gebID("window.Height").innerHTML=window.innerHeight.toString(),gebID("documentElement.Width").innerHTML=document.documentElement.clientWidth.toString(),gebID("documentElement.Height").innerHTML=document.documentElement.clientHeight.toString(),gebID("body.Width").innerHTML=gebTN(e)[0].clientWidth.toString(),gebID("body.Height").innerHTML=gebTN(e)[0].clientHeight.toString()}function displaySizes(e){null===e&&(e="body");var t=document.createElement("table");t.innerHTML="<tr><th>SOURCE</th><th>WIDTH</th><th>x</th><th>HEIGHT</th></tr><tr><td>screen</td><td id='screen.Width' /><td>x</td><td id='screen.Height' /></tr><tr><td>window</td><td id='window.Width' /><td>x</td><td id='window.Height' /></tr><tr><td>document<br>.documentElement</td><td id='documentElement.Width' /><td>x</td><td id='documentElement.Height' /></tr><tr><td>document.body</td><td id='body.Width' /><td>x</td><td id='body.Height' /></tr>",gebTN(e)[0].appendChild(t),setStyleToTags("table","border: 2px solid black !important; position: fixed !important;left: 100px !important; top: 90px !important; padding:5px !important;width: 200px !important; font-size:10px; !importantwhite-space: pre !important; font-family: monospace !important;z-index: 9999 !important;background: white !important;"),setStyleToTags("td","color: black !important; border: none !important; padding: 5px !important; text-align:center !important;"),setStyleToTags("th","color: black !important; border: none !important; padding: 5px !important; text-align:center !important;"),t.style.setProperty("margin-left","-"+t.clientWidth/2+"px"),setInterval(testSizes,200)}function sortByKey(e,t){return e.sort(function(e,n){var o=e[t],r=n[t];return o<r?-1:o>r?1:0})}function multObjArray2Array(e){for(var t=[],n=0;n<e.length;n++)for(var o=0;o<e[n].length;o++)t.push(e[n][o]);return t}function JSONDateToDateObj(e){// jd = JSON Date format ie. '2013-03-08T14:34:00:000Z'
if(24!=e.length||"-"!=e.substr(4,1)||"-"!=e.substr(7,1)||"T"!=e.substr(10,1)||":"!=e.substr(13,1)||":"!=e.substr(16,1)||":"!=e.substr(19,1)||"Z"!=e.substr(23,1))return null;var t=new Date;return t.setFullYear(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2)),t.setHours(e.substr(11,2)),t.setMinutes(e.substr(14,2)),t.setSeconds(e.substr(17,2)),t.setMilliseconds(e.substr(20,3)),t}function editImageData(e){alert("I'm sorry, you don't have the authority to edit image ID#"+e+".")}function deleteImage(e){alert("I'm sorry, you don't have the authority to delete image ID#"+e+".")}function enlargeToggle(e){alert("Enlarge image ID#"+e+".")}function resizePage(){$(document).ready(function(){console.log("resizePage: resize screen on load!");var e=window.height-100;$("#photoCarousel").css("height",e)})}function timedLoop(e,t){setTimeout(function(){console.log("timedLoop("+e+", "+t+")"),//  your code here                
--e&&timedLoop(e,t)},1e3*t)}var debug=!0;!function(){"use strict";
// Define main module.
angular.module("app",["ngAnimate","ngResource","ngTouch","ui","ui.bootstrap","ui.bootstrap.carousel","ui.bootstrap.progressbar","ui.calendar","ui.grid","ui.grid.edit","ui.grid.cellNav","ui.grid.resizeColumns","ui.grid.pinning","ui.grid.selection","ui.grid.moveColumns","ui.grid.exporter","ui.grid.importer","ui.grid.grouping","ui.router","ui.sortable"]);debug&&console.log("angular.module(app) defined")}(),/*****************************************************************************
 ** END OF FILE - app.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : app.config.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";
// Navigation is supplied via the following ui-router section
// 
angular.module("app").config(["$urlRouterProvider","$stateProvider",function(e,t){t.state("home",{controller:"homeController",templateUrl:"partials/home/home.html",url:"/home"}).state("facility",{controller:"facilityController",templateUrl:"partials/facility/facility.html",url:"/facility"}).state("homeless",{controller:"homelessController",templateUrl:"partials/homeless/homeless.html",url:"/homeless"}).state("volunteer",{controller:"volunteerController",templateUrl:"partials/volunteer/volunteer.carousel.html",url:"/volunteer"}).state("register",{controller:"userController",templateUrl:"partials/account/register.html",url:"/register"}).state("login",{controller:"userController",templateUrl:"partials/account/login.html",url:"/login"}).state("logout",{templateUrl:"partials/account/logout.html",url:"/logout"}),e.when("/facility/:facilityName","/partials/facility/:id").when("/volunteer/:volunteerName","/partials/volunteer/:id").when("/homeless/:homelessName","/partials/homeless/:id").otherwise("/home")}]),debug&&console.log('       .config(["$urlRouterProvider", "$stateProvider"]) defined')}(),/*****************************************************************************
 ** END OF FILE - app.config.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : app.run.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";angular.module("app").run(["$rootScope","$state","$stateParams",function(e,t,n){/* It's very handy to add references to $state and $stateParams to the $rootScope
                ** so that you can access them from any scope within your applications.
                ** For example, <li ng-class='{ active: $state.includes('contacts.list') }'> will
                ** set the <li> to active whenever 'contacts.list' or one of its decendents is active.
                */
e.state=t,e.stateParams=n,e.pageLoaded=!0,debug?(e.debug=debug,e.endPoint="http://localhost:3000"):e.endPoint="http://maintz.com"}]),debug&&console.log('       .run(["$rootScope","$state","$stateParams",function ($rootScope,$state,$stateParams) executed')}(),//  pass the number of iterations as an argument
debug&&console.log("misc.js functions defined"),
//}());
/*****************************************************************************
 ** END OF FILE - misc.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : about.controller.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";var e=function(e){debug&&console.log("aboutController activated"),e.items=["about","website"]};angular.module("app").controller("aboutController",["$scope",e]),debug&&console.log("aboutController defined")}(),/*****************************************************************************
 ** END OF FILE - about.controller.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : home.controller.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";angular.module("app").controller("homeController",["$rootScope",function(e){var t=e;
// Temporary values 
// TODO: replace these with real login values;
return debug&&console.log("homeController activated"),t.loggedIn=!0,t.userName="bill@maintz.com",showCalenders(),t}]),debug&&console.log("homeController defined")}(),/*****************************************************************************
 ** END OF FILE - home.controller.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : ui.calendar.controller.js
 **
 *****************************************************************************
 ****************************************************************************/
/*
*  AngularJs Fullcalendar Wrapper for the JQuery FullCalendar
*  API @ http://arshaw.com/fullcalendar/
*
*  Angular Calendar Directive that takes in the [eventSources] nested array object as the ng-model and watches it deeply changes.
*       Can also take in multiple event urls as a source object(s) and feed the events per view.
*       The calendar will watch any eventSource array and update itself when a change is made.
*
*/
function(){"use strict";var e=angular.module("ui.calendar",[]);debug&&console.log("ui.calendar defined"),e.constant("uiCalendarConfig",{calendars:{}}),debug&&console.log("uiCalendarConfig defined"),e.controller("uiCalendarController",["$timeout","$locale",function(e,t){var n=this;debug&&console.log("uiCalendarController activated");var o=n.eventSources,r=n.calendarWatchEvent?n.calendarWatchEvent:angular.noop,l=function(t){var n;return t&&(n=function(){
// This happens outside of angular context so we need to wrap it in a timeout which has an implied apply.
// In this way the function will be safely executed on the next digest.
var n=arguments,o=this;e(function(){t.apply(o,n)})}),n},a=1;
// @return {String} fingerprint of the event object and its properties
this.eventFingerprint=function(e){
// This extracts all the information we need from the event. http://jsperf.com/angular-calendar-events-fingerprint/3
return e._id||(e._id=a++),""+e._id+(e.id||"")+(e.title||"")+(e.url||"")+(+e.start||"")+(+e.end||"")+(e.allDay||"")+(e.className||"")+r(e)||""};var i=1,s=1;
// @return {String} fingerprint of the source object and its events array
this.sourceFingerprint=function(e){var t=""+(e.__id||(e.__id=i++)),n=angular.isObject(e)&&e.events;return n&&(t=t+"-"+(n.__id||(n.__id=s++))),t},
// @return {Array} all events from all sources
this.allEvents=function(){for(var e=[],t=0,n=o.length;t<n;t++){var r=o[t];if(angular.isArray(r))
// event source as array
e.push(r);else if(angular.isObject(r)&&angular.isArray(r.events)){
// event source as object, ie extended form
var l={};for(var a in r)"_id"!==a&&"events"!==a&&(l[a]=r[a]);for(var i=0;i<r.events.length;i++)angular.extend(r.events[i],l);e.push(r.events)}}return Array.prototype.concat.apply([],e)},
// Track changes in array of objects by assigning id tokens to each element and watching the scope for changes in the tokens
// @param {Array|Function} arraySource array of objects to watch
// @param tokenFn {Function} that returns the token for a given object
// @return {Object}
//  subscribe: function(scope, function(newTokens, oldTokens))
//    called when source has changed. return false to prevent individual callbacks from firing
//  onAdded/Removed/Changed:
//    when set to a callback, called each item where a respective change is detected
this.changeWatcher=function(e,t){var n,o=function(){for(var n,o,r=angular.isFunction(e)?e():e,a=[],i=0,s=r.length;i<s;i++)o=r[i],n=t(o),l[n]=o,a.push(n);return a},r=function(e,t){var n,o,r=[],l={};for(n=0,o=t.length;n<o;n++)l[t[n]]=!0;for(n=0,o=e.length;n<o;n++)l[e[n]]||r.push(e[n]);return r},l={},a=function(e,o){var a,i,s,d,u={},c=r(o,e);for(a=0,i=c.length;a<i;a++){var m=c[a];s=l[m],delete l[m];var g=t(s);
// if the element wasn't removed but simply got a new token, its old token will be different from the current one
g===m?n.onRemoved(s):(u[g]=m,n.onChanged(s))}var p=r(e,o);for(a=0,i=p.length;a<i;a++)d=p[a],s=l[d],u[d]||n.onAdded(s)};return n={subscribe:function(e,t){e.$watch(o,function(e,n){var o=!(t&&t(e,n)===!1);o&&a(e,n)},!0)},onAdded:angular.noop,onChanged:angular.noop,onRemoved:angular.noop}},this.getFullCalendarConfig=function(e,t){var n={};return angular.extend(n,t),angular.extend(n,e),angular.forEach(n,function(e,t){"function"==typeof e&&(n[t]=l(n[t]))}),n},this.getLocaleConfig=function(e){if(!e.lang||e.useNgLocale){
// Configure to use locale names by default
var n=function(e){
// convert {0: 'Jan', 1: 'Feb', ...} to ['Jan', 'Feb', ...]
var t,n;t=[];for(n in e)t[n]=e[n];return t},o=t.DATETIME_FORMATS;return{monthNames:n(o.MONTH),monthNamesShort:n(o.SHORTMONTH),dayNames:n(o.DAY),dayNamesShort:n(o.SHORTDAY)}}return{}}}]),debug&&console.log("uiCalendarController defined"),e.directive("uiCalendar",["uiCalendarConfig",function(e){return{restrict:"A",scope:{eventSources:"=ngModel",calendarWatchEvent:"&"},controller:"uiCalendarController",link:function(t,n,o,r){function l(){var n,l=o.uiCalendar?t.$parent.$eval(o.uiCalendar):{};n=r.getFullCalendarConfig(l,e);var a=r.getLocaleConfig(n);angular.extend(a,n),c={eventSources:i},angular.extend(c,a),
//remove calendars from options
c.calendars=null;var s={};for(var d in c)"eventSources"!==d&&(s[d]=c[d]);return JSON.stringify(s)}var a,i=t.eventSources,s=!1,d=r.changeWatcher(i,r.sourceFingerprint),u=r.changeWatcher(r.allEvents,r.eventFingerprint),c=null;t.destroy=function(){a&&a.fullCalendar&&a.fullCalendar("destroy"),a=o.calendar?e.calendars[o.calendar]=$(n).html(""):$(n).html("")},t.init=function(){a.fullCalendar(c),o.calendar&&(e.calendars[o.calendar]=a)},d.onAdded=function(e){a.fullCalendar("addEventSource",e),s=!0},d.onRemoved=function(e){a.fullCalendar("removeEventSource",e),s=!0},d.onChanged=function(e){console.log(e+" changed"),a.fullCalendar("refetchEvents"),s=!0},u.onAdded=function(e){a.fullCalendar("renderEvent",e,!!e.stick)},u.onRemoved=function(e){a.fullCalendar("removeEvents",e._id)},u.onChanged=function(e){e._start=jQuery.fullCalendar.moment(e.start),e._end=jQuery.fullCalendar.moment(e.end),a.fullCalendar("updateEvent",e)},d.subscribe(t),u.subscribe(t,function(){if(s===!0)
// return false to prevent onAdded/Removed/Changed handlers from firing in this case
return s=!1,!1}),t.$watch(l,function(e,n){console.log(e,n),t.destroy(),t.init()})}}}]),debug&&console.log("uiCalendar defined")}(),/*****************************************************************************
 ** END OF FILE - ui.calendar.controller.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : samples.controller.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";
// samplesController Function
var e=function(e,t,n){debug&&console.log("samplesController activated");var o=e;
// console.log(' samples = ', vm.samples);
// console.log('#samples = ', vm.samples.length);
// console.log(' samplesCats = ', vm.samplesCats);
// console.log('\nui-grid.Options = ', vm.gridOptions);
//////////////////////////////////////////////////////////////////////
// sampless collection
//////////////////////////////////////////////////////////////////////
// GET All samples
//////////////////////////////////////////////////////////////////////
// ui-grid options
//////////////////////////////////////////////////////////////////////
return o.init=function(){o.samples=[],o.samplesCats=[],o.sortOrder="id",o.samples=o.getAllV()},o.getAllV=function(){n.srvcGetAllsamples().then(function(e){
// success
o.samples=e,console.log("Number of samples returned = ["+o.samples.length+"]")},function(e){
// error
console.log("ERROR:"+e)},function(e){}).then(function(e){o.samplesCats=_.uniq(_.pluck(o.samples,"category"))}),debug&&0!=o.samples.length&&console.log("samplesController samples("+o.samples.length+")")},o.init(),o.addsamples=function(){var e=t.open({templateUrl:"/partials/samples/addsamples.html",controller:"samplesController"});e.result.then(function(){
// success
o.getAllV()},function(e){
// error
o.getAllV()},function(e){}),o.modifyData=!1},o.editsamples=function(e){o.modifyData=!0,confirm("Do you want to save the changes?")&&n.srvcEditsamples(e).then(function(e){
// success
o.getAllV()},function(e){
// error
console.log("ERROR:"+e)},function(e){}),o.modifyData=!1},o.delsamples=function(e){o.modifyData=!0,confirm("Are you sure you want to DELETE this samples?")&&(null==n.srvcDelsamples(e)?console.log("samples Id ["+e+"] has been deleted!"):console.log("ERROR: samples Id ["+e+"] has NOT been deleted!")),o.modifyData=!1},o.modifyData=!1,o.gridOptions={enableColumnResizing:!0,enableSorting:!0,rowHeight:100,columnDefs:[{field:"img",cellTemplate:"<img width='120px' ng-src='{{grid.getCellValue(row, col)}}' lazy-src>"},{field:"name",displayName:"Name"},{field:"category",displayName:"Category"},{name:"edit",displayName:"Edit",cellTemplate:'<button id="editBtn" type="button" class="btn-small" ng-click="edit(row.entity)" >Edit</button> '}]},o.rowColor=["cyan","cream"],o};
// samplesController Definiton
angular.module("app").controller("samplesController",["$scope","$modal","samplesService",e]),debug&&console.log("samplesController defined")}(),/*****************************************************************************
 ** END OF FILE - samples.controller.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : directives.js
 **
 *****************************************************************************
 ****************************************************************************/
// Define your directives here. 
// Directives can be added to same module as the main 'app' 
// or a seperate module can be created.
/**
 * @ngdoc directive
 * @name ui.bootstrap.carousel.directive:slide
 * @restrict EA
 *
 * @description
 * Creates a slide inside a {@link ui.bootstrap.carousel.directive:carousel carousel}.  Must be placed as a child of a carousel element.
 *
 * @param {boolean=} active Model binding, whether or not this slide is currently active.
 * @param {number=} index The index of the slide. The slides will be sorted by this parameter.
 *
 * @example
<example module="ui.bootstrap">
    <file name="index.html">
        <div ng-controller="CarouselDemoCtrl">
            <carousel>
                <slide ng-repeat="slide in slides" active="slide.active" index="$index">
                    <img ng-src="{{slide.image}}" style="margin:auto;">
                    <div class="carousel-caption">
                        <h4>Slide {{$index}}</h4>
                        <p>{{slide.text}}</p>
                    </div>
                </slide>
            </carousel>
            Interval, in milliseconds: <input type="number" ng-model="myInterval">
            <br />Enter a negative number to stop the interval.
        </div>
    </file>
    <file name="script.js">
        function CarouselDemoCtrl() {
            var vm = this;
            vm.myInterval = 5000;
        }
    </file>
    <file name="demo.css">
        .carousel-indicators {
            top: auto;
            bottom: 15px;
        }
    </file>
</example>
*/
function(){"use strict";angular.module("app").directive("photoFlip",function(){return{restrict:"E",replace:!0,
//templateURL: 'partials/photos/photo.test.html'
template:'<div>\n<input type="text" ng-model="model.input">\n<div>{{model.input}}</div>\n    \n</div>',link:function(e,t){e.$watch("model.input",function(e){"password"===e&&(console.log("change password."),t.children(1).toggleClass("alert-box alert"))})}}}),debug&&console.log('directive("photoFlip") defined')}(),/**
 * @ngdoc directive
 * @name ui.bootstrap.carousel.directive:carousel
 * @restrict EA
 *
 * @description
 * Carousel is the outer container for a set of image 'slides' to showcase.
 *
 * @param {number=} interval The time, in milliseconds, that it will take 
 *     the carousel to go to the next slide.
 * @param {boolean=} noTransition Whether to disable transitions on the 
 *     carousel.
 * @param {boolean=} noPause Whether to disable pausing on the carousel 
 *    (by default, the carousel interval pauses on hover).
 *
 * @example
<example module="ui.bootstrap">
  <file name="index.html">
    <carousel>
      <slide>
        <img src="http://placekitten.com/150/150" style="margin:auto;">
        <div class="carousel-caption">
          <p>Beautiful!</p>
        </div>
      </slide>
      <slide>
        <img src="http://placekitten.com/100/150" style="margin:auto;">
        <div class="carousel-caption">
          <p>D'aww!</p>
        </div>
      </slide>
    </carousel>
  </file>
  <file name="demo.css">
    .carousel-indicators {
      top: auto;
      bottom: 15px;
    }
  </file>
</example>
*/
/*****************************************************************************
 ** END OF FILE - test.directive.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : filters.js
 **
 *****************************************************************************
 ****************************************************************************/
/*jshint -W109 */
// ignore double-quotes in between single-quotes
function(e){"use strict";angular.module("app").filter("noNulls",function(e){var t=[];if(e)for(var n=0;n<e.length;n++)""!==e[n].name&&t.push(e[n]);return console.log("filteredPhotos from noNulls"),console.log(t),t}),e&&console.log('filter("noNulls") defined'),angular.module("app").filter("hilights",function(e){var t=[];if(e)for(var n=0;n<e.length;n++)1==e[n].hilight&&t.push(e[n]);return console.log("filteredPhotos from hilights"),console.log(t),t}),e&&console.log('filter("hilights") defined')}(),/*****************************************************************************
 ** END OF FILE - filter.js
 ****************************************************************************/
/*!***************************************************************************
 *****************************************************************************
 **
 ** Filename    : samples.service.js
 **
 *****************************************************************************
 ****************************************************************************/
function(){"use strict";var e=(angular.module("app"),function(e,t){
// GET all samples
function n(){var n=t.defer();
// Make call to RESTFUL API
return e.get("json/samples.json").success(function(e){d.samples=e,n.resolve(e)}).error(function(e,t){n.reject("Failed to get samples")}),n.promise}function o(){var e=d.samples,t=[];return e.length<1&&(e=n()),e.length>0&&(t=_.uniq(_.pluck(e,"category"))),d.samples=e,d.sampleCats=t,t}
// get the selected index into the array
function r(e){if(e>=0)for(var t=0;t<d.samples.length;t++)if(d.samples[t].id==e)return t;return-1}
// GET a sample
// pass in a sample Id and get the sample record
function l(e){var t=r(e);return t!=-1?(console.log("getAsample("+e+")("+t+") = ["+d.samples[t].name+"]"),d.samples[t]):(deferred.reject("sample could not be found!"),null)}
// ADD
function a(n){var o=t.defer();
// Make call to RESTFUL API
return e.post("json/samples.json",n).success(function(e){d.samples=e,o.resolve(e)}).error(function(e,t){o.reject("Failed to add sample")}),o.promise}
// UPDATE
// pass in a sample record and update the fields with the values
function i(e){var t=r(e.id);return t!=-1?(console.log("editsample("+id+")("+t+") changed:"),console.log("editsample( --- name     ["+d.samples[t].name+"] changed to ["+e.name+"]"),console.log("editsample( --- href     ["+d.samples[t].href+"] changed to ["+e.href+"]"),console.log("editsample( --- img      ["+d.samples[t].img+"] changed to ["+e.img+"]"),console.log("editsample( --- category ["+d.samples[t].category+"] changed to ["+e.category+"]"),d.samples[t].name=e.name,d.samples[t].href=e.href,d.samples[t].img=e.img,d.samples[t].category=e.category):console.log("Invalid sample index ["+t+"]"),d.samples[t]}
// DELETE
function s(e){var t=r(e);return t!=-1?(console.log("delsample("+e+")("+t+") deleted:"),console.log("delsample( --- name     ["+d.samples[t].name+"] deleted"),console.log("delsample( --- href     ["+d.samples[t].href+"] deleted"),console.log("delsample( --- img      ["+d.samples[t].img+"] deleted"),console.log("delsample( --- category ["+d.samples[t].category+"] deleted"),d.samples.splice(t,1),null):void console.log("Invalid sample index ["+t+"]")}var d={samples:[],sampleCats:[],srvcGetAllsamples:n,srvcGetsampleCats:o,srvcGetSelectedIndex:r,srvcGetAsample:l,srvcAddsample:a,srvcEditsample:i,srvcDelsample:s};return d});
// samplesService Definiton
angular.module("app").service("samplesService",["$http","$q",e])}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFsbGpzLm1pbi5qcyJdLCJuYW1lcyI6WyJnZXRDYWxlbmRhckhUTUwiLCJtbyIsInlyIiwic2hvd1RvZGF5IiwiTSIsIkFycmF5IiwiRCIsImRheU9uZSIsIkRhdGUiLCJkeSIsImdldERheSIsImV2YWwiLCJkIiwiTWF0aCIsImZsb29yIiwic3Vic3RyaW5nIiwibGVuZ3RoIiwicG9zIiwibGQiLCJ0ZGF5IiwiZ2V0RGF0ZSIsImRvdyIsImh0bWxUZXh0IiwiaSIsImN0ciIsInNob3dDYWxlbmRlcnMiLCJ0b2RheSIsInRoaXNNb250aCIsImdldE1vbnRoIiwidGhpc1llYXIiLCJnZXRZZWFyIiwibGFzdE1vbnRoIiwibGFzdFllYXIiLCJuZXh0WWVhciIsIm5leHRNb250aCIsImxhc3RNb25IdG1sIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRoaXNNb25IdG1sIiwibmV4dE1vbkh0bWwiLCJpbm5lckhUTUwiLCJnZWJJRCIsImlkIiwiZ2ViVE4iLCJ0YWdOYW1lIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJzZXRTdHlsZVRvVGFncyIsInN0eWxlU3RyaW5nIiwidGFncyIsInNldEF0dHJpYnV0ZSIsInRlc3RTaXplcyIsInBhcmVudE9iaiIsInNjcmVlbiIsIndpZHRoIiwidG9TdHJpbmciLCJoZWlnaHQiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImRpc3BsYXlTaXplcyIsInRhYmxlIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwic3R5bGUiLCJzZXRQcm9wZXJ0eSIsInNldEludGVydmFsIiwic29ydEJ5S2V5IiwiYXJyYXkiLCJrZXkiLCJzb3J0IiwiYSIsImIiLCJ4IiwieSIsIm11bHRPYmpBcnJheTJBcnJheSIsIm11bHRPYmpBcnJheSIsImFsbEFycmF5IiwiaiIsInB1c2giLCJKU09ORGF0ZVRvRGF0ZU9iaiIsImpkIiwic3Vic3RyIiwic2V0RnVsbFllYXIiLCJzZXRIb3VycyIsInNldE1pbnV0ZXMiLCJzZXRTZWNvbmRzIiwic2V0TWlsbGlzZWNvbmRzIiwiZWRpdEltYWdlRGF0YSIsImltZ0lEIiwiYWxlcnQiLCJkZWxldGVJbWFnZSIsImVubGFyZ2VUb2dnbGUiLCJyZXNpemVQYWdlIiwiJCIsInJlYWR5IiwiY29uc29sZSIsImxvZyIsIm5ld0hlaWdodCIsImNzcyIsInRpbWVkTG9vcCIsInNlY3MiLCJzZXRUaW1lb3V0IiwiZGVidWciLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJHN0YXRlUHJvdmlkZXIiLCJzdGF0ZSIsImNvbnRyb2xsZXIiLCJ0ZW1wbGF0ZVVybCIsInVybCIsIndoZW4iLCJvdGhlcndpc2UiLCJydW4iLCIkcm9vdFNjb3BlIiwiJHN0YXRlIiwiJHN0YXRlUGFyYW1zIiwic3RhdGVQYXJhbXMiLCJwYWdlTG9hZGVkIiwiZW5kUG9pbnQiLCJhYm91dENvbnRyb2xsZXIiLCIkc2NvcGUiLCJpdGVtcyIsInZtIiwibG9nZ2VkSW4iLCJ1c2VyTmFtZSIsInVpQ2FsZW5kYXIiLCJjb25zdGFudCIsImNhbGVuZGFycyIsIiR0aW1lb3V0IiwiJGxvY2FsZSIsInRoaXMiLCJzb3VyY2VzIiwiZXZlbnRTb3VyY2VzIiwiZXh0cmFFdmVudFNpZ25hdHVyZSIsImNhbGVuZGFyV2F0Y2hFdmVudCIsIm5vb3AiLCJ3cmFwRnVuY3Rpb25XaXRoU2NvcGVBcHBseSIsImZ1bmN0aW9uVG9XcmFwIiwid3JhcHBlciIsImFyZ3MiLCJhcmd1bWVudHMiLCJfdGhpcyIsImFwcGx5IiwiZXZlbnRTZXJpYWxJZCIsImV2ZW50RmluZ2VycHJpbnQiLCJlIiwiX2lkIiwidGl0bGUiLCJzdGFydCIsImVuZCIsImFsbERheSIsImNsYXNzTmFtZSIsInNvdXJjZVNlcmlhbElkIiwic291cmNlRXZlbnRzU2VyaWFsSWQiLCJzb3VyY2VGaW5nZXJwcmludCIsInNvdXJjZSIsImZwIiwiX19pZCIsImV2ZW50cyIsImlzT2JqZWN0IiwiYWxsRXZlbnRzIiwiYXJyYXlTb3VyY2VzIiwic3JjTGVuIiwiaXNBcnJheSIsImV4dEV2ZW50IiwiZUkiLCJleHRlbmQiLCJwcm90b3R5cGUiLCJjb25jYXQiLCJjaGFuZ2VXYXRjaGVyIiwiYXJyYXlTb3VyY2UiLCJ0b2tlbkZuIiwic2VsZiIsImdldFRva2VucyIsInRva2VuIiwiZWwiLCJpc0Z1bmN0aW9uIiwicmVzdWx0IiwibiIsIm1hcCIsInN1YnRyYWN0QXNTZXRzIiwiaW5CIiwiYXBwbHlDaGFuZ2VzIiwibmV3VG9rZW5zIiwib2xkVG9rZW5zIiwicmVwbGFjZWRUb2tlbnMiLCJyZW1vdmVkVG9rZW5zIiwicmVtb3ZlZFRva2VuIiwibmV3VG9rZW4iLCJvblJlbW92ZWQiLCJvbkNoYW5nZWQiLCJhZGRlZFRva2VucyIsIm9uQWRkZWQiLCJzdWJzY3JpYmUiLCJzY29wZSIsIm9uQXJyYXlDaGFuZ2VkIiwiJHdhdGNoIiwibm90aWZ5IiwiZ2V0RnVsbENhbGVuZGFyQ29uZmlnIiwiY2FsZW5kYXJTZXR0aW5ncyIsInVpQ2FsZW5kYXJDb25maWciLCJmb3JFYWNoIiwidmFsdWUiLCJnZXRMb2NhbGVDb25maWciLCJmdWxsQ2FsZW5kYXJDb25maWciLCJsYW5nIiwidXNlTmdMb2NhbGUiLCJ0VmFsdWVzIiwiZGF0YSIsInIiLCJrIiwiZHRmIiwiREFURVRJTUVfRk9STUFUUyIsIm1vbnRoTmFtZXMiLCJNT05USCIsIm1vbnRoTmFtZXNTaG9ydCIsIlNIT1JUTU9OVEgiLCJkYXlOYW1lcyIsIkRBWSIsImRheU5hbWVzU2hvcnQiLCJTSE9SVERBWSIsImRpcmVjdGl2ZSIsInJlc3RyaWN0IiwibGluayIsImVsbSIsImF0dHJzIiwiZ2V0T3B0aW9ucyIsIiRwYXJlbnQiLCIkZXZhbCIsImxvY2FsZUZ1bGxDYWxlbmRhckNvbmZpZyIsIm9wdGlvbnMiLCJvcHRpb25zMiIsIm8iLCJKU09OIiwic3RyaW5naWZ5IiwiY2FsZW5kYXIiLCJzb3VyY2VzQ2hhbmdlZCIsImV2ZW50U291cmNlc1dhdGNoZXIiLCJldmVudHNXYXRjaGVyIiwiZGVzdHJveSIsImZ1bGxDYWxlbmRhciIsImh0bWwiLCJpbml0IiwiZXZlbnQiLCJzdGljayIsIl9zdGFydCIsImpRdWVyeSIsIm1vbWVudCIsIl9lbmQiLCJuZXdPIiwib2xkTyIsInNhbXBsZXNDb250cm9sbGVyIiwiJG1vZGFsIiwic2FtcGxlc1NlcnZpY2UiLCJzYW1wbGVzIiwic2FtcGxlc0NhdHMiLCJzb3J0T3JkZXIiLCJnZXRBbGxWIiwic3J2Y0dldEFsbHNhbXBsZXMiLCJ0aGVuIiwicmVzcG9uc2UiLCJlcnIiLCJtc2ciLCJfIiwidW5pcSIsInBsdWNrIiwiYWRkc2FtcGxlcyIsIm1vZGFsSW5zdGFuY2UiLCJvcGVuIiwibW9kaWZ5RGF0YSIsImVkaXRzYW1wbGVzIiwiY29uZmlybSIsInNydmNFZGl0c2FtcGxlcyIsImRlbHNhbXBsZXMiLCJzcnZjRGVsc2FtcGxlcyIsImdyaWRPcHRpb25zIiwiZW5hYmxlQ29sdW1uUmVzaXppbmciLCJlbmFibGVTb3J0aW5nIiwicm93SGVpZ2h0IiwiY29sdW1uRGVmcyIsImZpZWxkIiwiY2VsbFRlbXBsYXRlIiwiZGlzcGxheU5hbWUiLCJuYW1lIiwicm93Q29sb3IiLCJyZXBsYWNlIiwidGVtcGxhdGUiLCJlbGVtZW50IiwiY2hpbGRyZW4iLCJ0b2dnbGVDbGFzcyIsImZpbHRlciIsIlBob3RvcyIsImZpbHRlcmVkUGhvdG9zIiwiaGlsaWdodCIsIiRodHRwIiwiJHEiLCJkZWZlcnJlZCIsImRlZmVyIiwiZ2V0Iiwic3VjY2VzcyIsInNlcnZpY2UiLCJyZXNvbHZlIiwiZXJyb3IiLCJzdGF0dXMiLCJyZWplY3QiLCJwcm9taXNlIiwic3J2Y0dldHNhbXBsZUNhdHMiLCJzYW1wbGVDYXRzIiwic3J2Y0dldFNlbGVjdGVkSW5kZXgiLCJzcnZjR2V0QXNhbXBsZSIsImlkeCIsInNydmNBZGRzYW1wbGUiLCJzYW1wbGUiLCJwb3N0Iiwic3J2Y0VkaXRzYW1wbGUi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QVE5QyxRQUFRd0QsR0FBSzNCLEtBQVcsYUFDMUU5TCxRQUFRQyxJQUFJLDRCQUE4QjhNLEVBQVE5QyxRQUFRd0QsR0FBS0ssS0FBVyxhQUMxRTlOLFFBQVFDLElBQUksNEJBQThCOE0sRUFBUTlDLFFBQVF3RCxHQUFLTSxJQUFXLGFBQzFFL04sUUFBUUMsSUFBSSw0QkFBOEI4TSxFQUFROUMsUUFBUXdELEdBQUtPLFNBQVcsYUFDMUVqQixFQUFROUMsUUFBUWlFLE9BQU9ULEVBQUksR0FFcEIsVUFFUHpOLFNBQVFDLElBQUkseUJBQTJCd04sRUFBTSxLQWxIckQsR0FBSVYsSUFDQTlDLFdBQ0FxRCxjQUNBakQsa0JBQW1CQSxFQUNuQmdELGtCQUFtQkEsRUFDbkJFLHFCQUFzQkEsRUFDdEJDLGVBQWdCQSxFQUNoQkUsY0FBZUEsRUFDZkcsZUFBZ0JBLEVBQ2hCSSxjQUFlQSxFQTRHbkIsT0FBT2xCOztBQUlYdk0sUUFDS0MsT0FBTyxPQUNQc00sUUFBUSxrQkFDTCxRQUNBLEtBQ0EvQyIsImZpbGUiOiJhbGxqcy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqXHJcbiAqKiBAbmdkb2Mgb3ZlcnZpZXdcclxuICoqIEBuYW1lIGFwcC5qc1xyXG4gKipcclxuICoqIEBkZXNjcmlwdGlvblxyXG4gKiogbWFpbiBBbmd1bGFySlMgYXBwbGljYXRpb24gZGVmaW5pdGlvbiBmaWxlIC0gbG9hZHMgYWxsIHBsdWdpbnMgdGhhdCB3aWxsIFxyXG4gKiogYmUgYSBwYXJ0IG9mIHRoZSBtb2R1bGUuXHJcbiAqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgIFxyXG4vLyBHbG9iYWwgZGVidWcgZmxhZyAocGFzc2VkIHRvIG90aGVyIG1vZHVsZXMpXHJcbnZhciBkZWJ1ZyA9IHRydWU7XHJcblxyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIERlZmluZSBtYWluIG1vZHVsZS5cclxuICAgIHZhciBuZ0FwcCA9IGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnLCBcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgJ25nQW5pbWF0ZScsXHJcbiAgICAgICAgICAgICAgICAnbmdSZXNvdXJjZScsXHJcbiAgICAgICAgICAgICAgICAnbmdUb3VjaCcsXHJcbiAgICAgICAgICAgICAgICAndWknLFxyXG4gICAgICAgICAgICAgICAgJ3VpLmJvb3RzdHJhcCcsXHJcbiAgICAgICAgICAgICAgICAndWkuYm9vdHN0cmFwLmNhcm91c2VsJyxcclxuICAgICAgICAgICAgICAgICd1aS5ib290c3RyYXAucHJvZ3Jlc3NiYXInLFxyXG4gICAgICAgICAgICAgICAgJ3VpLmNhbGVuZGFyJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLmVkaXQnLFxyXG4gICAgICAgICAgICAgICAgJ3VpLmdyaWQuY2VsbE5hdicsXHJcbiAgICAgICAgICAgICAgICAndWkuZ3JpZC5yZXNpemVDb2x1bW5zJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLnBpbm5pbmcnLFxyXG4gICAgICAgICAgICAgICAgJ3VpLmdyaWQuc2VsZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLm1vdmVDb2x1bW5zJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLmV4cG9ydGVyJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLmltcG9ydGVyJyxcclxuICAgICAgICAgICAgICAgICd1aS5ncmlkLmdyb3VwaW5nJyxcclxuICAgICAgICAgICAgICAgICd1aS5yb3V0ZXInLFxyXG4gICAgICAgICAgICAgICAgJ3VpLnNvcnRhYmxlJ1xyXG4gICAgICAgICAgICBdXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICBpZihkZWJ1Zyl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2FuZ3VsYXIubW9kdWxlKGFwcCkgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0oKSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqIEVORCBPRiBGSUxFIC0gYXBwLmpzXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKipcclxuICoqIEZpbGVuYW1lICAgIDogYXBwLmNvbmZpZy5qc1xyXG4gKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4oZnVuY3Rpb24gKCkge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIE5hdmlnYXRpb24gaXMgc3VwcGxpZWQgdmlhIHRoZSBmb2xsb3dpbmcgdWktcm91dGVyIHNlY3Rpb25cclxuICAgIC8vIFxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbmZpZyggWyAgICckdXJsUm91dGVyUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyLCAgICRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICRzdGF0ZVByb3ZpZGVyXHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdXJsIC0gbWF0Y2hlcyB0aGUgdWktc3JlZiBvbiB0aGUgaW5kZXguaHRtbCBwYWdlXHJcbiAgICAgICAgICAgICAgICAvLyB0ZW1wbGF0ZVVybCAtIG1hdGNoZXMgdGhlIGxvY2F0aW9uIG9mIHRoZSBwYXJ0aWFsIGh0bWwgZmlsZVxyXG4gICAgICAgICAgICAgICAgLy8gY29udHJvbGxlciAtIG1hdGNoZXMgdGhlIG5hbWUgb2YgdGhlIGNvbnRyb2xsZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgcGFnZVxyXG4gICAgICAgICAgICAgICAgLy8gc2VydmljZSAtIGlkZW50aWZpZXMgdGhlIHNlcnZpY2UgdXNlZCB0byBnZXQgdGhlIGRhdGEgbmVlZGVkIGZvciB0aGlzIHBhZ2UuXHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgLy8gVG8gYmUgZGlzcGxheWVkIG9uIG1haW4gc2NyZWVuOlxyXG4gICAgICAgICAgICAgICAgLy8gJHN0YXRlICAgICAgICAgID0ge3sgJHN0YXRlLmN1cnJlbnQubmFtZSB9fVxyXG4gICAgICAgICAgICAgICAgLy8gJHN0YXRlUGFyYW1zICAgID0ge3sgJHN0YXRlUGFyYW1zIH19XHJcbiAgICAgICAgICAgICAgICAvLyAkc3RhdGUgZnVsbCB1cmwgPSB7eyAkc3RhdGUuJGN1cnJlbnQudXJsLnNvdXJjZSB9fVxyXG4gICAgICAgICAgICAgICAgLy8gJHN0YXRlUHJvdmlkZXIgID0ge3sgJHN0YXRlUHJvdmlkZXIgfX1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLyogSG9tZSAqL1xyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdob21lJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdob21lQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9ob21lL2hvbWUuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2hvbWUnXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIGZhY2lsaXRpZXMgKi8gICAgXHJcbiAgICAgICAgICAgICAgICAuc3RhdGUoJ2ZhY2lsaXR5Jywge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdmYWNpbGl0eUNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvZmFjaWxpdHkvZmFjaWxpdHkuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2ZhY2lsaXR5J1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBob21lbGVzcyAqL1xyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdob21lbGVzcycsIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnaG9tZWxlc3NDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2hvbWVsZXNzL2hvbWVsZXNzLmh0bWwnLFxyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJy9ob21lbGVzcydcclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgLyogdm9sdW50ZWVycyAqL1xyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCd2b2x1bnRlZXInLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3ZvbHVudGVlckNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvdm9sdW50ZWVyL3ZvbHVudGVlci5jYXJvdXNlbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvdm9sdW50ZWVyJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgLyogUmVnaXN0ZXIgKi9cclxuICAgICAgICAgICAgICAgIC5zdGF0ZSgncmVnaXN0ZXInLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3VzZXJDb250cm9sbGVyJyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2FjY291bnQvcmVnaXN0ZXIuaHRtbCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnL3JlZ2lzdGVyJ1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgICAgICAvKiBMb2dpbiAqL1xyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdsb2dpbicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAndXNlckNvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAncGFydGlhbHMvYWNjb3VudC9sb2dpbi5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvbG9naW4nXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgICAgIC8qIExvZ291dCAqL1xyXG4gICAgICAgICAgICAgICAgLnN0YXRlKCdsb2dvdXQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9hY2NvdW50L2xvZ291dC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6ICcvbG9nb3V0J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHVybFJvdXRlclByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAqKiBUaGUgYHdoZW5gIG1ldGhvZCBzYXlzIGlmIHRoZSB1cmwgaXMgZXZlciB0aGUgMXN0IHBhcmFtLCB0aGVuIHJlZGlyZWN0IHRvIHRoZSAybmQgcGFyYW1cclxuICAgICAgICAgICAgICAgICAgICAqKiBIZXJlIHdlIGFyZSBqdXN0IHNldHRpbmcgdXAgc29tZSBjb252ZW5pZW5jZSB1cmxzLlxyXG4gICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgICAgLndoZW4oJy9mYWNpbGl0eS86ZmFjaWxpdHlOYW1lJywgJy9wYXJ0aWFscy9mYWNpbGl0eS86aWQnKVxyXG4gICAgICAgICAgICAgICAgICAgIC53aGVuKCcvdm9sdW50ZWVyLzp2b2x1bnRlZXJOYW1lJywgJy9wYXJ0aWFscy92b2x1bnRlZXIvOmlkJylcclxuICAgICAgICAgICAgICAgICAgICAud2hlbignL2hvbWVsZXNzLzpob21lbGVzc05hbWUnLCAnL3BhcnRpYWxzL2hvbWVsZXNzLzppZCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAqKiBJZiB0aGUgdXJsIGlzIGV2ZXIgaW52YWxpZCwgZS5nLiAnL2FzZGYnLCB0aGVuIHJlZGlyZWN0IHRvICcvJyBha2EgdGhlIGhvbWUgc3RhdGVcclxuICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIC5vdGhlcndpc2UoJy9ob21lJyk7XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgXSk7XHJcblxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCcgICAgICAgLmNvbmZpZyhbXCIkdXJsUm91dGVyUHJvdmlkZXJcIiwgXCIkc3RhdGVQcm92aWRlclwiXSkgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxuXHJcbn0oKSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqIEVORCBPRiBGSUxFIC0gYXBwLmNvbmZpZy5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqXHJcbiAqKiBGaWxlbmFtZSAgICA6IGFwcC5ydW4uanNcclxuICoqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbmFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5ydW4oXHJcbiAgICAgICAgWyAgICAgICAgICAgICckcm9vdFNjb3BlJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoJHJvb3RTY29wZSwgICAkc3RhdGUsICAgJHN0YXRlUGFyYW1zKSB7XHJcbiAgICAgICAgICAgICAgICAvKiBJdCdzIHZlcnkgaGFuZHkgdG8gYWRkIHJlZmVyZW5jZXMgdG8gJHN0YXRlIGFuZCAkc3RhdGVQYXJhbXMgdG8gdGhlICRyb290U2NvcGVcclxuICAgICAgICAgICAgICAgICoqIHNvIHRoYXQgeW91IGNhbiBhY2Nlc3MgdGhlbSBmcm9tIGFueSBzY29wZSB3aXRoaW4geW91ciBhcHBsaWNhdGlvbnMuXHJcbiAgICAgICAgICAgICAgICAqKiBGb3IgZXhhbXBsZSwgPGxpIG5nLWNsYXNzPSd7IGFjdGl2ZTogJHN0YXRlLmluY2x1ZGVzKCdjb250YWN0cy5saXN0JykgfSc+IHdpbGxcclxuICAgICAgICAgICAgICAgICoqIHNldCB0aGUgPGxpPiB0byBhY3RpdmUgd2hlbmV2ZXIgJ2NvbnRhY3RzLmxpc3QnIG9yIG9uZSBvZiBpdHMgZGVjZW5kZW50cyBpcyBhY3RpdmUuXHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnN0YXRlID0gJHN0YXRlO1xyXG4gICAgICAgICAgICAgICAgJHJvb3RTY29wZS5zdGF0ZVBhcmFtcyA9ICRzdGF0ZVBhcmFtcztcclxuXHJcbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLnBhZ2VMb2FkZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKGRlYnVnKXtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmRlYnVnID0gZGVidWc7XHJcbiAgICAgICAgICAgICAgICAgICAgJHJvb3RTY29wZS5lbmRQb2ludCA9ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLmVuZFBvaW50ID0gJ2h0dHA6Ly9tYWludHouY29tJztcclxuICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICBdKTtcclxuXHJcbiAgICBpZihkZWJ1Zyl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJyAgICAgICAucnVuKFtcIiRyb290U2NvcGVcIixcIiRzdGF0ZVwiLFwiJHN0YXRlUGFyYW1zXCIsZnVuY3Rpb24gKCRyb290U2NvcGUsJHN0YXRlLCRzdGF0ZVBhcmFtcykgZXhlY3V0ZWQnKTtcclxuICAgIH1cclxuXHJcbn0oKSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqIEVORCBPRiBGSUxFIC0gYXBwLnJ1bi5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqXHJcbiAqKiBGaWxlbmFtZSAgICA6IG1pc2MuanNcclxuICoqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuLypqc2hpbnQgLVcwNjEgKi8gLy8gaWdub3JlIGV2YWwgY2FuIGJlIGhhcm1mdWxcclxuXHJcblxyXG4gICAgLy8gJCgndWwuZHJvcGRvd24tbWVudScpLmZpbmQoJ2xpJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgLy8gICAgIC8vIHJlbW92ZSB0aGUgJ29wZW4nIGNsYXNzIG9uIHRoZSBwYXJlbnQgZWxlbWVudCBcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5kcm9wZG93bi1tZW51JykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcclxuICAgIC8vICAgICAkKHRoaXMpLnBhcmVudHMoJy5kcm9wZG93bi1tZW51JykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgLy8gfSk7XHJcblxyXG4vLyhmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAvLyBNaXNjZWxsYW5lb3VzIENhbGVuZGFyIGZ1bmN0aW9uc1xyXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0Q2FsZW5kYXJIVE1MKG1vLCB5ciwgc2hvd1RvZGF5KXtcclxuICAgICAgICAvLyBtbyA9IHplcm8tYmFzZWQgbW9udGggbnVtYmVyXHJcbiAgICAgICAgLy8geXIgPSA0IGRpZ2l0IHllYXIgWVlZWVxyXG4gICAgICAgIC8vIENyZWF0ZSBhbiBhcnJheSBjb250YWluaW5nIHRoZSBtb250aCBuYW1lc1xyXG4gICAgICAgIHZhciBNID0gbmV3IEFycmF5KCdKYW51YXJ5JywnRmVicnVhcnknLCdNYXJjaCcsJ0FwcmlsJywnTWF5JywnSnVuZScsJ0p1bHknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnQXVndXN0JywnU2VwdGVtYmVyJywnT2N0b2JlcicsJ05vdmVtYmVyJywnRGVjZW1iZXInKTtcclxuICAgICAgICAvLyBDcmVhdGUgYW4gYXJyYXkgd2l0aCB0aGUgZGF5cyBvZiB0aGUgd2Vla1xyXG4gICAgICAgIHZhciBEID0gbmV3IEFycmF5KCdTdW4nLCdNb24nLCdUdWUnLCdXZWQnLCdUaHUnLCdGcmknLCdTYXQnKTtcclxuICAgICAgICAvLyBUaGUgZmlyc3Qgb2YgdGhlIG1vbnRoXHJcbiAgICAgICAgdmFyIGRheU9uZSA9IG5ldyBEYXRlKE1bbW9dKycgMSwnK3lyKTtcclxuICAgICAgICAvLyBEZXRlcm1pbmUgdGhlIGRheSBvZiB0aGUgd2VlayB1cG9uIHdoaWNoIHRoZSAxc3Qgb2YgdGhlIG1vbnRoIGZhbGxzXHJcbiAgICAgICAgdmFyIGR5ID0gZGF5T25lLmdldERheSgpO1xyXG4gICAgICAgIHlyID0gZXZhbCh5cik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRGF5cyBpbiBlYWNoIG1vbnRoXHJcbiAgICAgICAgdmFyIGQgPSAnMzEyODMxMzAzMTMwMzEzMTMwMzEzMDMxJztcclxuICAgICAgICAvLyBJcyB0aGlzIGxlYXAgeWVhcj9cclxuICAgICAgICBpZiAoeXIgLyA0ID09PSBNYXRoLmZsb29yKHlyIC8gNCkpIHtcclxuICAgICAgICAgICAgZCA9IGQuc3Vic3RyaW5nKDAsIDIpICsgJzI5JyArIGQuc3Vic3RyaW5nKDQsIGQubGVuZ3RoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBwb3NpdGlvbiBpbiB0aGUgZCBzdHJpbmcgZm9yIHRoaXMgbW9udGhcclxuICAgICAgICB2YXIgcG9zID0gKG1vICogMik7XHJcbiAgICAgICAgLy8gR3JhYiAyIGNoYXJhY3RlciBwb3NpdGlvbnMgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGlzIG1vbnRoIChsYXN0IGRheSlcclxuICAgICAgICB2YXIgbGQgPSBldmFsKGQuc3Vic3RyaW5nKHBvcywgcG9zICsgMikpO1xyXG4gICAgICAgIHZhciB0ZGF5ID0gbmV3IERhdGUoKS5nZXREYXRlKCk7XHJcbiAgICAgICAgdmFyIGRvdyA9IG5ldyBEYXRlKCkuZ2V0RGF5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RhcnQgb3V0cHV0dGluZyB0aGlzIG1vbnRoJ3MgY2FsZW5kYXJcclxuICAgICAgICAvL3ZhciBodG1sVGV4dCA9ICAnPGRpdiBjbGFzcz1cImNvbC1sZy00IGNvbC1tZC00IGNvbC1zbS00IGNvbC14cy00XCI+JztcclxuICAgICAgICB2YXIgaHRtbFRleHQgPSAnPHRhYmxlIGNsYXNzPVwiY2FsVGFibGVcIj48dHI+JztcclxuICAgICAgICAvLyBEaXNwbGF5IHRoZSBtb250aCBhbmQgeWVhclxyXG4gICAgICAgIGh0bWxUZXh0ICs9ICc8dGggY2xhc3M9XCJtb25IZHJcIic7XHJcbiAgICAgICAgaWYoc2hvd1RvZGF5KXtodG1sVGV4dCArPSAnIGhpTGl0ZSc7fVxyXG4gICAgICAgIGh0bWxUZXh0ICs9ICdcIiBjb2xzcGFuPTcgY2VudGVyPicgKyBNW21vXSArICcgJyArIHlyICsgJzwvdGg+PC90cj4nO1xyXG4gICAgICAgIC8vIERpc3BsYXkgdGhlIGRheXMgb2YgdGhlIHdlZWtcclxuICAgICAgICBodG1sVGV4dCArPSAnPHRyPic7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7aSA8IDc7aSArKykge1xyXG4gICAgICAgICAgICBpZigoaSA9PSBkb3cpICYmIChzaG93VG9kYXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gJzx0ZCBjbGFzcz1cIndrZGF5SGRyIGhpTGl0ZVwiPic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxUZXh0ICs9ICc8dGQgY2xhc3M9XCJ3a2RheUhkclwiPic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBodG1sVGV4dCArPSBEW2ldICsgJzwvdGQ+JzsgICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgdGhlIGRheXMgb2YgdGhlIHdlZWtcclxuICAgICAgICB9XHJcbiAgICAgICAgaHRtbFRleHQgKz0gJzwvdHI+JztcclxuICAgICAgICB2YXIgY3RyID0gMDtcclxuICAgICAgICAvLyBEaXNwbGF5IHRoZSBkYXkgb2YgdGhlIG1vbnRoIG9yIGEgYmxhbmsgaWYgdGhlIDFzdCBmYWxscyBpbiBtaWQtd2Vla1xyXG4gICAgICAgIGh0bWxUZXh0ICs9ICc8dHIgY2xhc3M9XCJjYWxEYXlSb3dcIj4nO1xyXG4gICAgICAgIC8vIERpc3BsYXkgdGhlIGRheSBvZiB0aGUgbW9udGggb3IgYSBibGFuayBzcGFjZVxyXG4gICAgICAgIC8vIGZvciB0aGUgZmlyc3Qgd2VlayBvZiB0aGUgbW9udGhcclxuICAgICAgICBmb3IgKGkgPSAwO2kgPCA3OyBpKyspe1xyXG4gICAgICAgICAgICBpZiAoaSA8IGR5KSB7XHJcbiAgICAgICAgICAgICAgICBodG1sVGV4dCArPSAnPHRkPiA8L3RkPic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjdHIrKztcclxuICAgICAgICAgICAgICAgIGlmKChjdHIgPT0gdGRheSkgJiYgKHNob3dUb2RheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sVGV4dCArPSAnPHRkIGNsYXNzPVwiaGlMaXRlXCI+JztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gJzx0ZD4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gY3RyICsgJzwvdGQ+JztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBodG1sVGV4dCArPSAnPC90cj4nO1xyXG4gICAgICAgIC8vIERpc3BsYXkgdGhlIGRheSBvZiB0aGUgbW9udGggZm9yIHRoZSByZXN0IG9mIHRoZSBtb250aFxyXG4gICAgICAgIC8vIERpc3BsYXkgYSBibGFuayBhZnRlciB0aGUgbGFzdCBkYXkgb2YgdGhlIG1vbnRoXHJcbiAgICAgICAgaHRtbFRleHQgKz0gJzx0ciBjbGFzcz1cImNhbERheVJvd1wiPic7XHJcbiAgICAgICAgd2hpbGUgKGN0ciA8PSBsZCkge1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwO2kgPCA3OyBpKyspe1xyXG4gICAgICAgICAgICAgICAgY3RyKys7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3RyID4gbGQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxUZXh0ICs9ICc8dGQ+IDwvdGQ+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKChjdHIgPT0gdGRheSkgJiYgKHNob3dUb2RheSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gJzx0ZCBjbGFzcz1cImhpTGl0ZVwiPic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFRleHQgKz0gJzx0ZD4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBodG1sVGV4dCArPSBjdHIgKyAnPC90ZD4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGh0bWxUZXh0ICs9ICc8L3RyPjx0ciBjbGFzcz1cImNhbERheVJvd1wiPic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGh0bWxUZXh0ICs9ICc8L3RyPjwvdGFibGU+PGJyIGNsYXNzPVwiY2xlYXJcIiAvPjwvZGl2Pic7XHJcbiAgICAgICAgcmV0dXJuIGh0bWxUZXh0O1xyXG4gICAgfVxyXG4gICAgXHJcblxyXG4gICAgZnVuY3Rpb24gc2hvd0NhbGVuZGVycygpIHtcclxuXHJcbiAgICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKTsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG9kYXkncyBkYXRlXHJcbiAgICAgICAgdmFyIHRoaXNNb250aCA9IHRvZGF5LmdldE1vbnRoKCk7ICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgbW9udGggLSB6ZXJvLWJhc2VkXHJcbiAgICAgICAgdmFyIHRoaXNZZWFyID0gdG9kYXkuZ2V0WWVhcigpICsgMTkwMDsgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGN1cnJlbnQgeWVhclxyXG4gICAgICAgIHZhciBsYXN0TW9udGggPSAodGhpc01vbnRoPT09MD8xMTp0aGlzTW9udGgtMSk7ICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSBsYXN0IG1vbnRoXHJcbiAgICAgICAgdmFyIGxhc3RZZWFyID0gKHRoaXNNb250aD09PTA/dGhpc1llYXItMTp0aGlzWWVhcik7ICAgICAgICAgLy8gY2FsY3VsYXRlIGxhc3QgbW9udGgncyB5ZWFyXHJcbiAgICAgICAgdmFyIG5leHRZZWFyID0gKHRoaXNNb250aD09PTExP3RoaXNZZWFyKzE6dGhpc1llYXIpOyAgICAgICAgLy8gbmV4dCBtb250aCdzIHllYXJcclxuICAgICAgICB2YXIgbmV4dE1vbnRoID0gKHRoaXNNb250aD09PTExPzA6dGhpc01vbnRoKzEpOyAgICAgICAgICAgICAvLyBuZXh0IG1vbnRoXHJcblxyXG4gICAgICAgIHZhciBsYXN0TW9uSHRtbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxMYXN0TW9uJyk7XHJcbiAgICAgICAgdmFyIHRoaXNNb25IdG1sID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbFRoaXNNb24nKTtcclxuICAgICAgICB2YXIgbmV4dE1vbkh0bWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FsTmV4dE1vbicpO1xyXG4gICAgICAgICAgIFxyXG4gICAgICAgIGlmKCBsYXN0TW9uSHRtbCApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBsYXN0TW9uSHRtbC5pbm5lckhUTUwgPSBnZXRDYWxlbmRhckhUTUwobGFzdE1vbnRoLCBsYXN0WWVhciwgZmFsc2UpOyAgICAvLyBTZW5kIGxhc3QgbW9udGggdG8gc2NyZWVuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKCB0aGlzTW9uSHRtbCApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzTW9uSHRtbC5pbm5lckhUTUwgPSBnZXRDYWxlbmRhckhUTUwodGhpc01vbnRoLCB0aGlzWWVhciwgdHJ1ZSk7ICAgICAvLyBTZW5kIHRoaXMgbW9udGggdG8gc2NyZWVuXHJcbiAgICAgICAgfVxyXG4gICAgXHJcbiAgICAgICAgaWYoIG5leHRNb25IdG1sIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIG5leHRNb25IdG1sLmlubmVySFRNTCA9IGdldENhbGVuZGFySFRNTChuZXh0TW9udGgsIG5leHRZZWFyLCBmYWxzZSk7ICAgIC8vIFNlbmQgbmV4dCBtb250aCB0byBzY3JlZW5cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4gICAgLy8gR2F0aGVyIFNjcmVlbiBTaXplIEluZm9ybWF0aW9uXHJcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbiAgICBmdW5jdGlvbiBnZWJJRChpZCl7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTsgXHJcbiAgICB9XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGdlYlROKHRhZ05hbWUpe1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gc2V0U3R5bGVUb1RhZ3ModGFnTmFtZSwgc3R5bGVTdHJpbmcpe1xyXG4gICAgICAgIHZhciB0YWdzID0gZ2ViVE4odGFnTmFtZSk7XHJcbiAgICAgICAgZm9yKCB2YXIgaSA9IDA7IGk8dGFncy5sZW5ndGg7IGkrKyApXHJcbiAgICAgICAgICAgIHRhZ3NbaV0uc2V0QXR0cmlidXRlKCdzdHlsZScsIHN0eWxlU3RyaW5nKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gdGVzdFNpemVzKHBhcmVudE9iail7XHJcbiAgICAgICAgaWYoIHBhcmVudE9iaiA9PT0gbnVsbCl7IHBhcmVudE9iaiA9ICdib2R5JzsgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGdlYklEKCAnc2NyZWVuLldpZHRoJyApLmlubmVySFRNTCA9IHNjcmVlbi53aWR0aC50b1N0cmluZygpO1xyXG4gICAgICAgIGdlYklEKCAnc2NyZWVuLkhlaWdodCcgKS5pbm5lckhUTUwgPSBzY3JlZW4uaGVpZ2h0LnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICAgIGdlYklEKCAnd2luZG93LldpZHRoJyApLmlubmVySFRNTCA9IHdpbmRvdy5pbm5lcldpZHRoLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgZ2ViSUQoICd3aW5kb3cuSGVpZ2h0JyApLmlubmVySFRNTCA9IHdpbmRvdy5pbm5lckhlaWdodC50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBnZWJJRCggJ2RvY3VtZW50RWxlbWVudC5XaWR0aCcgKS5pbm5lckhUTUwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGgudG9TdHJpbmcoKTtcclxuICAgICAgICBnZWJJRCggJ2RvY3VtZW50RWxlbWVudC5IZWlnaHQnICkuaW5uZXJIVE1MID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodC50b1N0cmluZygpO1xyXG5cclxuICAgICAgICBnZWJJRCggJ2JvZHkuV2lkdGgnICkuaW5uZXJIVE1MID0gZ2ViVE4ocGFyZW50T2JqKVswXS5jbGllbnRXaWR0aC50b1N0cmluZygpO1xyXG4gICAgICAgIGdlYklEKCAnYm9keS5IZWlnaHQnICkuaW5uZXJIVE1MID0gZ2ViVE4ocGFyZW50T2JqKVswXS5jbGllbnRIZWlnaHQudG9TdHJpbmcoKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBkaXNwbGF5U2l6ZXMocGFyZW50T2JqKSB7XHJcbiAgICAgICAgaWYoIHBhcmVudE9iaiA9PT0gbnVsbCl7IHBhcmVudE9iaiA9ICdib2R5JzsgfVxyXG4gICAgICAgIHZhciB0YWJsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RhYmxlJyk7XHJcbiAgICAgICAgdGFibGUuaW5uZXJIVE1MID0gJzx0cj48dGg+U09VUkNFPC90aD48dGg+V0lEVEg8L3RoPjx0aD54PC90aD48dGg+SEVJR0hUPC90aD48L3RyPicgK1xyXG4gICAgICAgICc8dHI+PHRkPnNjcmVlbjwvdGQ+PHRkIGlkPVxcJ3NjcmVlbi5XaWR0aFxcJyAvPjx0ZD54PC90ZD48dGQgaWQ9XFwnc2NyZWVuLkhlaWdodFxcJyAvPjwvdHI+JyArXHJcbiAgICAgICAgJzx0cj48dGQ+d2luZG93PC90ZD48dGQgaWQ9XFwnd2luZG93LldpZHRoXFwnIC8+PHRkPng8L3RkPjx0ZCBpZD1cXCd3aW5kb3cuSGVpZ2h0XFwnIC8+PC90cj4nICtcclxuICAgICAgICAnPHRyPjx0ZD5kb2N1bWVudDxicj4uZG9jdW1lbnRFbGVtZW50PC90ZD48dGQgaWQ9XFwnZG9jdW1lbnRFbGVtZW50LldpZHRoXFwnIC8+PHRkPng8L3RkPicrXHJcbiAgICAgICAgJzx0ZCBpZD1cXCdkb2N1bWVudEVsZW1lbnQuSGVpZ2h0XFwnIC8+PC90cj4nICtcclxuICAgICAgICAnPHRyPjx0ZD5kb2N1bWVudC5ib2R5PC90ZD48dGQgaWQ9XFwnYm9keS5XaWR0aFxcJyAvPjx0ZD54PC90ZD48dGQgaWQ9XFwnYm9keS5IZWlnaHRcXCcgLz48L3RyPic7XHJcblxyXG4gICAgICAgIGdlYlROKHBhcmVudE9iailbMF0uYXBwZW5kQ2hpbGQoIHRhYmxlICk7XHJcblxyXG4gICAgICAgIHNldFN0eWxlVG9UYWdzKCd0YWJsZScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2JvcmRlcjogMnB4IHNvbGlkIGJsYWNrICFpbXBvcnRhbnQ7IHBvc2l0aW9uOiBmaXhlZCAhaW1wb3J0YW50OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICdsZWZ0OiAxMDBweCAhaW1wb3J0YW50OyB0b3A6IDkwcHggIWltcG9ydGFudDsgcGFkZGluZzo1cHggIWltcG9ydGFudDsnICtcclxuICAgICAgICAgICAgICAgICAgICAnd2lkdGg6IDIwMHB4ICFpbXBvcnRhbnQ7IGZvbnQtc2l6ZToxMHB4OyAhaW1wb3J0YW50JyArXHJcbiAgICAgICAgICAgICAgICAgICAgJ3doaXRlLXNwYWNlOiBwcmUgIWltcG9ydGFudDsgZm9udC1mYW1pbHk6IG1vbm9zcGFjZSAhaW1wb3J0YW50OycgK1xyXG4gICAgICAgICAgICAgICAgICAgICd6LWluZGV4OiA5OTk5ICFpbXBvcnRhbnQ7YmFja2dyb3VuZDogd2hpdGUgIWltcG9ydGFudDsnXHJcbiAgICAgICAgKTtcclxuICAgICAgICBzZXRTdHlsZVRvVGFncygndGQnLCAnY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7IGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyBwYWRkaW5nOiA1cHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXIgIWltcG9ydGFudDsnKTtcclxuICAgICAgICBzZXRTdHlsZVRvVGFncygndGgnLCAnY29sb3I6IGJsYWNrICFpbXBvcnRhbnQ7IGJvcmRlcjogbm9uZSAhaW1wb3J0YW50OyBwYWRkaW5nOiA1cHggIWltcG9ydGFudDsgdGV4dC1hbGlnbjpjZW50ZXIgIWltcG9ydGFudDsnKTtcclxuXHJcbiAgICAgICAgdGFibGUuc3R5bGUuc2V0UHJvcGVydHkoICdtYXJnaW4tbGVmdCcsICctJysoIHRhYmxlLmNsaWVudFdpZHRoIC8gMiApKydweCcgKTtcclxuXHJcbiAgICAgICAgc2V0SW50ZXJ2YWwoIHRlc3RTaXplcywgMjAwICk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gc29ydEJ5S2V5KGFycmF5LCBrZXkpIHtcclxuICAgICAgICByZXR1cm4gYXJyYXkuc29ydChmdW5jdGlvbihhLCBiKSB7XHJcbiAgICAgICAgICAgIHZhciB4ID0gYVtrZXldOyB2YXIgeSA9IGJba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuICgoeCA8IHkpID8gLTEgOiAoKHggPiB5KSA/IDEgOiAwKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbXVsdE9iakFycmF5MkFycmF5KG11bHRPYmpBcnJheSl7XHJcbiAgICAgICAgLy9jb25zb2xlLmRlYnVnKCdtdWx0T2JqQXJyYXknKTtcclxuICAgICAgICAvL2NvbnNvbGUuZGVidWcobXVsdE9iakFycmF5KTtcclxuICAgICAgICB2YXIgYWxsQXJyYXkgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGk9MDsgaTxtdWx0T2JqQXJyYXkubGVuZ3RoOyBpKyspXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBmb3IodmFyIGo9MDsgajxtdWx0T2JqQXJyYXlbaV0ubGVuZ3RoO2orKylcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYWxsQXJyYXkucHVzaCggbXVsdE9iakFycmF5W2ldW2pdICk7XHJcbiAgICAgICAgICAgICAgICAvL2NvbnNvbGUuZGVidWcoJ1xcdEFkZGluZyAnICsgbXVsdE9iakFycmF5W2ldW2pdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWxsQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gSlNPTkRhdGVUb0RhdGVPYmogKGpkKSB7IC8vIGpkID0gSlNPTiBEYXRlIGZvcm1hdCBpZS4gJzIwMTMtMDMtMDhUMTQ6MzQ6MDA6MDAwWidcclxuICAgICAgICBpZiggKGpkLmxlbmd0aCAhPSAyNCkgfHwgIChqZC5zdWJzdHIoNCwxKSAhPSAnLScpIHx8ICAoamQuc3Vic3RyKDcsMSkgIT0gJy0nKSB8fCAgKGpkLnN1YnN0cigxMCwxKSAhPSAnVCcpIHx8ICAoamQuc3Vic3RyKDEzLDEpICE9ICc6JykgfHwgIChqZC5zdWJzdHIoMTYsMSkgIT0gJzonKSB8fCAgKGpkLnN1YnN0cigxOSwxKSAhPSAnOicpIHx8ICAoamQuc3Vic3RyKDIzLDEpICE9ICdaJykgKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZC5zZXRGdWxsWWVhcihqZC5zdWJzdHIoMCw0KSwgamQuc3Vic3RyKDUsMiktMSwgamQuc3Vic3RyKDgsMikpO1xyXG4gICAgICAgIGQuc2V0SG91cnMoamQuc3Vic3RyKDExLDIpKTtcclxuICAgICAgICBkLnNldE1pbnV0ZXMoamQuc3Vic3RyKDE0LDIpKTtcclxuICAgICAgICBkLnNldFNlY29uZHMoamQuc3Vic3RyKDE3LDIpKTtcclxuICAgICAgICBkLnNldE1pbGxpc2Vjb25kcyhqZC5zdWJzdHIoMjAsMykpO1xyXG4gICAgICAgIHJldHVybiBkO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVkaXRJbWFnZURhdGEoaW1nSUQpIHtcclxuICAgICAgICBhbGVydCgnSVxcJ20gc29ycnksIHlvdSBkb25cXCd0IGhhdmUgdGhlIGF1dGhvcml0eSB0byBlZGl0IGltYWdlIElEIycgKyBpbWdJRCArICcuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZGVsZXRlSW1hZ2UoaW1nSUQpe1xyXG4gICAgICAgIGFsZXJ0KCdJXFwnbSBzb3JyeSwgeW91IGRvblxcJ3QgaGF2ZSB0aGUgYXV0aG9yaXR5IHRvIGRlbGV0ZSBpbWFnZSBJRCMnICsgaW1nSUQgKyAnLicpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGVubGFyZ2VUb2dnbGUoaW1nSUQpe1xyXG4gICAgICAgIGFsZXJ0KCdFbmxhcmdlIGltYWdlIElEIycgKyBpbWdJRCArICcuJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gcmVzaXplUGFnZSgpIHtcclxuICAgICAgICAkKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyggJ3Jlc2l6ZVBhZ2U6IHJlc2l6ZSBzY3JlZW4gb24gbG9hZCEnICk7XHJcbiAgICAgICAgICAgIHZhciBuZXdIZWlnaHQgPSB3aW5kb3cuaGVpZ2h0IC0gMTAwO1xyXG4gICAgICAgICAgICAkKCAnI3Bob3RvQ2Fyb3VzZWwnICkuY3NzKCAnaGVpZ2h0JywgbmV3SGVpZ2h0ICk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gdGltZWRMb29wKGksIHNlY3MpIHsgICAgICAgICAgXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7ICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0aW1lZExvb3AoJyArIGkgKyAnLCAnICsgc2VjcyAgKyAnKScpOyAgICAgICAgIC8vICB5b3VyIGNvZGUgaGVyZSAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKC0taSkgdGltZWRMb29wKGksIHNlY3MpOyAgICAgLy8gIGRlY3JlbWVudCBpIGFuZCBjYWxsIG15TG9vcCBhZ2FpbiBpZiBpID4gMFxyXG4gICAgICAgIH0sIHNlY3MgKiAxMDAwKTtcclxuICAgIH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gIHBhc3MgdGhlIG51bWJlciBvZiBpdGVyYXRpb25zIGFzIGFuIGFyZ3VtZW50XHJcblxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdtaXNjLmpzIGZ1bmN0aW9ucyBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG4vL30oKSk7XHJcblxyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKiBFTkQgT0YgRklMRSAtIG1pc2MuanNcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKipcclxuICoqIEZpbGVuYW1lICAgIDogYWJvdXQuY29udHJvbGxlci5qc1xyXG4gKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgYWJvdXRDb250cm9sbGVyID0gZnVuY3Rpb24gKCRzY29wZSkge1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGRlYnVnKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2Fib3V0Q29udHJvbGxlciBhY3RpdmF0ZWQnKTtcclxuICAgICAgICB9ICAgIFxyXG5cclxuICAgICAgICAkc2NvcGUuaXRlbXMgPSBbXHJcbiAgICAgICAgICAgICdhYm91dCcsXHJcbiAgICAgICAgICAgICd3ZWJzaXRlJ1xyXG4gICAgICAgIF07XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignYWJvdXRDb250cm9sbGVyJywgW1xyXG4gICAgICAgICAgICAnJHNjb3BlJywgXHJcbiAgICAgICAgICAgIGFib3V0Q29udHJvbGxlclxyXG4gICAgICAgIF0pO1xyXG5cclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnYWJvdXRDb250cm9sbGVyIGRlZmluZWQnKTtcclxuICAgIH1cclxuXHJcbn0oKSk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqIEVORCBPRiBGSUxFIC0gYWJvdXQuY29udHJvbGxlci5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKlxyXG4gKiogRmlsZW5hbWUgICAgOiBob21lLmNvbnRyb2xsZXIuanNcclxuICoqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2hvbWVDb250cm9sbGVyJywgW1xyXG4gICAgICAgICAgICAgICAgJyRyb290U2NvcGUnLCBcclxuICAgICAgICBmdW5jdGlvbigkcm9vdFNjb3BlKXtcclxuXHJcbiAgICAgICAgICAgIHZhciB2bSA9ICRyb290U2NvcGU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZihkZWJ1Zyl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaG9tZUNvbnRyb2xsZXIgYWN0aXZhdGVkJyk7XHJcbiAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBUZW1wb3JhcnkgdmFsdWVzIFxyXG4gICAgICAgICAgICAvLyBUT0RPOiByZXBsYWNlIHRoZXNlIHdpdGggcmVhbCBsb2dpbiB2YWx1ZXM7XHJcbiAgICAgICAgICAgIHZtLmxvZ2dlZEluID0gdHJ1ZTtcclxuICAgICAgICAgICAgdm0udXNlck5hbWUgPSAnYmlsbEBtYWludHouY29tJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHNob3dDYWxlbmRlcnMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZtO1xyXG4gICAgICAgIH1cclxuICAgIF0pO1xyXG5cclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnaG9tZUNvbnRyb2xsZXIgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxufSgpKTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiogRU5EIE9GIEZJTEUgLSBob21lLmNvbnRyb2xsZXIuanNcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKipcclxuICoqIEZpbGVuYW1lICAgIDogdWkuY2FsZW5kYXIuY29udHJvbGxlci5qc1xyXG4gKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuLypcclxuKiAgQW5ndWxhckpzIEZ1bGxjYWxlbmRhciBXcmFwcGVyIGZvciB0aGUgSlF1ZXJ5IEZ1bGxDYWxlbmRhclxyXG4qICBBUEkgQCBodHRwOi8vYXJzaGF3LmNvbS9mdWxsY2FsZW5kYXIvXHJcbipcclxuKiAgQW5ndWxhciBDYWxlbmRhciBEaXJlY3RpdmUgdGhhdCB0YWtlcyBpbiB0aGUgW2V2ZW50U291cmNlc10gbmVzdGVkIGFycmF5IG9iamVjdCBhcyB0aGUgbmctbW9kZWwgYW5kIHdhdGNoZXMgaXQgZGVlcGx5IGNoYW5nZXMuXHJcbiogICAgICAgQ2FuIGFsc28gdGFrZSBpbiBtdWx0aXBsZSBldmVudCB1cmxzIGFzIGEgc291cmNlIG9iamVjdChzKSBhbmQgZmVlZCB0aGUgZXZlbnRzIHBlciB2aWV3LlxyXG4qICAgICAgIFRoZSBjYWxlbmRhciB3aWxsIHdhdGNoIGFueSBldmVudFNvdXJjZSBhcnJheSBhbmQgdXBkYXRlIGl0c2VsZiB3aGVuIGEgY2hhbmdlIGlzIG1hZGUuXHJcbipcclxuKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIHVpQ2FsZW5kYXIgPSBhbmd1bGFyLm1vZHVsZSgndWkuY2FsZW5kYXInLCBbXSk7XHJcbiAgICBpZihkZWJ1Zyl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3VpLmNhbGVuZGFyIGRlZmluZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICB1aUNhbGVuZGFyLmNvbnN0YW50KCd1aUNhbGVuZGFyQ29uZmlnJywge2NhbGVuZGFyczoge319KTtcclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBjb25zb2xlLmxvZygndWlDYWxlbmRhckNvbmZpZyBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdWlDYWxlbmRhci5jb250cm9sbGVyKCd1aUNhbGVuZGFyQ29udHJvbGxlcicsIFtcclxuICAgICAgICAgICAgICAgICAgICAnJHRpbWVvdXQnLCAnJGxvY2FsZScsIFxyXG4gICAgICAgICAgICBmdW5jdGlvbigkdGltZW91dCwgICAkbG9jYWxlKXtcclxuXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgaWYoZGVidWcpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndWlDYWxlbmRhckNvbnRyb2xsZXIgYWN0aXZhdGVkJyk7XHJcbiAgICAgICAgfSAgXHJcblxyXG4gICAgICAgIHZhciBzb3VyY2VzID0gdm0uZXZlbnRTb3VyY2VzLFxyXG4gICAgICAgICAgICBleHRyYUV2ZW50U2lnbmF0dXJlID0gdm0uY2FsZW5kYXJXYXRjaEV2ZW50ID8gdm0uY2FsZW5kYXJXYXRjaEV2ZW50IDogYW5ndWxhci5ub29wLFxyXG4gICAgICAgICAgICB3cmFwRnVuY3Rpb25XaXRoU2NvcGVBcHBseSA9IGZ1bmN0aW9uKGZ1bmN0aW9uVG9XcmFwKXtcclxuICAgICAgICAgICAgICAgIHZhciB3cmFwcGVyO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZ1bmN0aW9uVG9XcmFwKXtcclxuICAgICAgICAgICAgICAgICAgICB3cmFwcGVyID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIG91dHNpZGUgb2YgYW5ndWxhciBjb250ZXh0IHNvIHdlIG5lZWQgdG8gd3JhcCBpdCBpbiBhIHRpbWVvdXQgd2hpY2ggaGFzIGFuIGltcGxpZWQgYXBwbHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluIHRoaXMgd2F5IHRoZSBmdW5jdGlvbiB3aWxsIGJlIHNhZmVseSBleGVjdXRlZCBvbiB0aGUgbmV4dCBkaWdlc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb25Ub1dyYXAuYXBwbHkoX3RoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyYXBwZXI7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIHZhciBldmVudFNlcmlhbElkID0gMTtcclxuICAgICAgICAvLyBAcmV0dXJuIHtTdHJpbmd9IGZpbmdlcnByaW50IG9mIHRoZSBldmVudCBvYmplY3QgYW5kIGl0cyBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdGhpcy5ldmVudEZpbmdlcnByaW50ID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBpZiAoIWUuX2lkKSB7XHJcbiAgICAgICAgICAgICAgICBlLl9pZCA9IGV2ZW50U2VyaWFsSWQrKztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUaGlzIGV4dHJhY3RzIGFsbCB0aGUgaW5mb3JtYXRpb24gd2UgbmVlZCBmcm9tIHRoZSBldmVudC4gaHR0cDovL2pzcGVyZi5jb20vYW5ndWxhci1jYWxlbmRhci1ldmVudHMtZmluZ2VycHJpbnQvM1xyXG4gICAgICAgICAgICByZXR1cm4gJycgKyBlLl9pZCArIChlLmlkIHx8ICcnKSArIChlLnRpdGxlIHx8ICcnKSArIChlLnVybCB8fCAnJykgKyAoK2Uuc3RhcnQgfHwgJycpICsgKCtlLmVuZCB8fCAnJykgK1xyXG4gICAgICAgICAgICAgICAgKGUuYWxsRGF5IHx8ICcnKSArIChlLmNsYXNzTmFtZSB8fCAnJykgKyBleHRyYUV2ZW50U2lnbmF0dXJlKGUpIHx8ICcnO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBzb3VyY2VTZXJpYWxJZCA9IDEsIHNvdXJjZUV2ZW50c1NlcmlhbElkID0gMTtcclxuICAgICAgICAvLyBAcmV0dXJuIHtTdHJpbmd9IGZpbmdlcnByaW50IG9mIHRoZSBzb3VyY2Ugb2JqZWN0IGFuZCBpdHMgZXZlbnRzIGFycmF5XHJcbiAgICAgICAgdGhpcy5zb3VyY2VGaW5nZXJwcmludCA9IGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgICAgICAgICB2YXIgZnAgPSAnJyArIChzb3VyY2UuX19pZCB8fCAoc291cmNlLl9faWQgPSBzb3VyY2VTZXJpYWxJZCsrKSksXHJcbiAgICAgICAgICAgICAgICBldmVudHMgPSBhbmd1bGFyLmlzT2JqZWN0KHNvdXJjZSkgJiYgc291cmNlLmV2ZW50cztcclxuICAgICAgICAgICAgaWYgKGV2ZW50cykge1xyXG4gICAgICAgICAgICAgICAgZnAgPSBmcCArICctJyArIChldmVudHMuX19pZCB8fCAoZXZlbnRzLl9faWQgPSBzb3VyY2VFdmVudHNTZXJpYWxJZCsrKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGZwO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEByZXR1cm4ge0FycmF5fSBhbGwgZXZlbnRzIGZyb20gYWxsIHNvdXJjZXNcclxuICAgICAgICB0aGlzLmFsbEV2ZW50cyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAvLyBkbyBzb3VyY2VzLm1hcCgmOmV2ZW50cykuZmxhdHRlbigpLCBidXQgd2UgZG9uJ3QgaGF2ZSBmbGF0dGVuXHJcbiAgICAgICAgICAgIHZhciBhcnJheVNvdXJjZXMgPSBbXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHNyY0xlbiA9IHNvdXJjZXMubGVuZ3RoOyBpIDwgc3JjTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFuZ3VsYXIuaXNBcnJheShzb3VyY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbnQgc291cmNlIGFzIGFycmF5XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyYXlTb3VyY2VzLnB1c2goc291cmNlKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihhbmd1bGFyLmlzT2JqZWN0KHNvdXJjZSkgJiYgYW5ndWxhci5pc0FycmF5KHNvdXJjZS5ldmVudHMpKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBldmVudCBzb3VyY2UgYXMgb2JqZWN0LCBpZSBleHRlbmRlZCBmb3JtXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dEV2ZW50ID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gc291cmNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoa2V5ICE9PSAnX2lkJyAmJiBrZXkgIT09ICdldmVudHMnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dEV2ZW50W2tleV0gPSBzb3VyY2Vba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGVJID0gMDtlSSA8IHNvdXJjZS5ldmVudHMubGVuZ3RoO2VJKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChzb3VyY2UuZXZlbnRzW2VJXSxleHRFdmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhcnJheVNvdXJjZXMucHVzaChzb3VyY2UuZXZlbnRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJyYXlTb3VyY2VzKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBUcmFjayBjaGFuZ2VzIGluIGFycmF5IG9mIG9iamVjdHMgYnkgYXNzaWduaW5nIGlkIHRva2VucyB0byBlYWNoIGVsZW1lbnQgYW5kIHdhdGNoaW5nIHRoZSBzY29wZSBmb3IgY2hhbmdlcyBpbiB0aGUgdG9rZW5zXHJcbiAgICAgICAgLy8gQHBhcmFtIHtBcnJheXxGdW5jdGlvbn0gYXJyYXlTb3VyY2UgYXJyYXkgb2Ygb2JqZWN0cyB0byB3YXRjaFxyXG4gICAgICAgIC8vIEBwYXJhbSB0b2tlbkZuIHtGdW5jdGlvbn0gdGhhdCByZXR1cm5zIHRoZSB0b2tlbiBmb3IgYSBnaXZlbiBvYmplY3RcclxuICAgICAgICAvLyBAcmV0dXJuIHtPYmplY3R9XHJcbiAgICAgICAgLy8gIHN1YnNjcmliZTogZnVuY3Rpb24oc2NvcGUsIGZ1bmN0aW9uKG5ld1Rva2Vucywgb2xkVG9rZW5zKSlcclxuICAgICAgICAvLyAgICBjYWxsZWQgd2hlbiBzb3VyY2UgaGFzIGNoYW5nZWQuIHJldHVybiBmYWxzZSB0byBwcmV2ZW50IGluZGl2aWR1YWwgY2FsbGJhY2tzIGZyb20gZmlyaW5nXHJcbiAgICAgICAgLy8gIG9uQWRkZWQvUmVtb3ZlZC9DaGFuZ2VkOlxyXG4gICAgICAgIC8vICAgIHdoZW4gc2V0IHRvIGEgY2FsbGJhY2ssIGNhbGxlZCBlYWNoIGl0ZW0gd2hlcmUgYSByZXNwZWN0aXZlIGNoYW5nZSBpcyBkZXRlY3RlZFxyXG4gICAgICAgIHRoaXMuY2hhbmdlV2F0Y2hlciA9IGZ1bmN0aW9uKGFycmF5U291cmNlLCB0b2tlbkZuKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmO1xyXG4gICAgICAgICAgICB2YXIgZ2V0VG9rZW5zID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBhbmd1bGFyLmlzRnVuY3Rpb24oYXJyYXlTb3VyY2UpID8gYXJyYXlTb3VyY2UoKSA6IGFycmF5U291cmNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IFtdLCB0b2tlbiwgZWw7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbiA9IGFycmF5Lmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsID0gYXJyYXlbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSB0b2tlbkZuKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXBbdG9rZW5dID0gZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2godG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIEBwYXJhbSB7QXJyYXl9IGFcclxuICAgICAgICAgICAgLy8gQHBhcmFtIHtBcnJheX0gYlxyXG4gICAgICAgICAgICAvLyBAcmV0dXJuIHtBcnJheX0gZWxlbWVudHMgaW4gdGhhdCBhcmUgaW4gYSBidXQgbm90IGluIGJcclxuICAgICAgICAgICAgLy8gQGV4YW1wbGVcclxuICAgICAgICAgICAgLy8gIHN1YnRyYWN0QXNTZXRzKFs2LCAxMDAsIDQsIDVdLCBbNCwgNSwgN10pIC8vIFs2LCAxMDBdXHJcbiAgICAgICAgICAgIHZhciBzdWJ0cmFjdEFzU2V0cyA9IGZ1bmN0aW9uKGEsIGIpIHtcclxuICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXSwgaW5CID0ge30sIGksIG47XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYi5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBpbkJbYltpXV0gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMCwgbiA9IGEubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpbkJbYVtpXV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnB1c2goYVtpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIE1hcCBvYmplY3RzIHRvIHRva2VucyBhbmQgdmljZS12ZXJzYVxyXG4gICAgICAgICAgICB2YXIgbWFwID0ge307XHJcblxyXG4gICAgICAgICAgICAvLyBDb21wYXJlIG5ld1Rva2VucyB0byBvbGRUb2tlbnMgYW5kIGNhbGwgb25BZGRlZCwgb25SZW1vdmVkLCBhbmQgb25DaGFuZ2VkIGhhbmRsZXJzIGZvciBlYWNoIGFmZmVjdGVkIGV2ZW50IHJlc3BlY3RpdmVseS5cclxuICAgICAgICAgICAgdmFyIGFwcGx5Q2hhbmdlcyA9IGZ1bmN0aW9uKG5ld1Rva2Vucywgb2xkVG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSwgbiwgZWwsIHRva2VuO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlcGxhY2VkVG9rZW5zID0ge307XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVtb3ZlZFRva2VucyA9IHN1YnRyYWN0QXNTZXRzKG9sZFRva2VucywgbmV3VG9rZW5zKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDAsIG4gPSByZW1vdmVkVG9rZW5zLmxlbmd0aDsgaSA8IG47IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZW1vdmVkVG9rZW4gPSByZW1vdmVkVG9rZW5zW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsID0gbWFwW3JlbW92ZWRUb2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIG1hcFtyZW1vdmVkVG9rZW5dO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBuZXdUb2tlbiA9IHRva2VuRm4oZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBlbGVtZW50IHdhc24ndCByZW1vdmVkIGJ1dCBzaW1wbHkgZ290IGEgbmV3IHRva2VuLCBpdHMgb2xkIHRva2VuIHdpbGwgYmUgZGlmZmVyZW50IGZyb20gdGhlIGN1cnJlbnQgb25lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5ld1Rva2VuID09PSByZW1vdmVkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vblJlbW92ZWQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcGxhY2VkVG9rZW5zW25ld1Rva2VuXSA9IHJlbW92ZWRUb2tlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkNoYW5nZWQoZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRUb2tlbnMgPSBzdWJ0cmFjdEFzU2V0cyhuZXdUb2tlbnMsIG9sZFRva2Vucyk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwLCBuID0gYWRkZWRUb2tlbnMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4gPSBhZGRlZFRva2Vuc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBlbCA9IG1hcFt0b2tlbl07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXBsYWNlZFRva2Vuc1t0b2tlbl0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vbkFkZGVkKGVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHNlbGYgPSB7XHJcbiAgICAgICAgICAgICAgICBzdWJzY3JpYmU6IGZ1bmN0aW9uKHNjb3BlLCBvbkFycmF5Q2hhbmdlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChnZXRUb2tlbnMsIGZ1bmN0aW9uKG5ld1Rva2Vucywgb2xkVG9rZW5zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3RpZnkgPSAhKG9uQXJyYXlDaGFuZ2VkICYmIG9uQXJyYXlDaGFuZ2VkKG5ld1Rva2Vucywgb2xkVG9rZW5zKSA9PT0gZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobm90aWZ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcHBseUNoYW5nZXMobmV3VG9rZW5zLCBvbGRUb2tlbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25BZGRlZDogYW5ndWxhci5ub29wLFxyXG4gICAgICAgICAgICAgICAgb25DaGFuZ2VkOiBhbmd1bGFyLm5vb3AsXHJcbiAgICAgICAgICAgICAgICBvblJlbW92ZWQ6IGFuZ3VsYXIubm9vcFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldEZ1bGxDYWxlbmRhckNvbmZpZyA9IGZ1bmN0aW9uKGNhbGVuZGFyU2V0dGluZ3MsIHVpQ2FsZW5kYXJDb25maWcpe1xyXG4gICAgICAgICAgICB2YXIgY29uZmlnID0ge307XHJcblxyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjb25maWcsIHVpQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgICBhbmd1bGFyLmV4dGVuZChjb25maWcsIGNhbGVuZGFyU2V0dGluZ3MpO1xyXG5cclxuICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKGNvbmZpZywgZnVuY3Rpb24odmFsdWUsa2V5KXtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZ1trZXldID0gd3JhcEZ1bmN0aW9uV2l0aFNjb3BlQXBwbHkoY29uZmlnW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb25maWc7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRMb2NhbGVDb25maWcgPSBmdW5jdGlvbihmdWxsQ2FsZW5kYXJDb25maWcpIHtcclxuICAgICAgICAgICAgaWYgKCFmdWxsQ2FsZW5kYXJDb25maWcubGFuZyB8fCBmdWxsQ2FsZW5kYXJDb25maWcudXNlTmdMb2NhbGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIENvbmZpZ3VyZSB0byB1c2UgbG9jYWxlIG5hbWVzIGJ5IGRlZmF1bHRcclxuICAgICAgICAgICAgICAgIHZhciB0VmFsdWVzID0gZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnZlcnQgezA6ICdKYW4nLCAxOiAnRmViJywgLi4ufSB0byBbJ0phbicsICdGZWInLCAuLi5dXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHIsIGs7XHJcbiAgICAgICAgICAgICAgICAgICAgciA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoayBpbiBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJba10gPSBkYXRhW2tdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcjtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB2YXIgZHRmID0gJGxvY2FsZS5EQVRFVElNRV9GT1JNQVRTO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBtb250aE5hbWVzOiB0VmFsdWVzKGR0Zi5NT05USCksXHJcbiAgICAgICAgICAgICAgICAgICAgbW9udGhOYW1lc1Nob3J0OiB0VmFsdWVzKGR0Zi5TSE9SVE1PTlRIKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXlOYW1lczogdFZhbHVlcyhkdGYuREFZKSxcclxuICAgICAgICAgICAgICAgICAgICBkYXlOYW1lc1Nob3J0OiB0VmFsdWVzKGR0Zi5TSE9SVERBWSlcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgIH07XHJcbiAgICB9XSk7XHJcblxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd1aUNhbGVuZGFyQ29udHJvbGxlciBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG4gICAgdWlDYWxlbmRhci5kaXJlY3RpdmUoJ3VpQ2FsZW5kYXInLCBbJ3VpQ2FsZW5kYXJDb25maWcnLCBmdW5jdGlvbih1aUNhbGVuZGFyQ29uZmlnKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVzdHJpY3Q6ICdBJyxcclxuICAgICAgICAgICAgc2NvcGU6IHtldmVudFNvdXJjZXM6Jz1uZ01vZGVsJyxjYWxlbmRhcldhdGNoRXZlbnQ6ICcmJ30sXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICd1aUNhbGVuZGFyQ29udHJvbGxlcicsXHJcbiAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbG0sIGF0dHJzLCBjb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZXMgPSBzY29wZS5ldmVudFNvdXJjZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlc0NoYW5nZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhcixcclxuICAgICAgICAgICAgICAgICAgICBldmVudFNvdXJjZXNXYXRjaGVyID0gY29udHJvbGxlci5jaGFuZ2VXYXRjaGVyKHNvdXJjZXMsIGNvbnRyb2xsZXIuc291cmNlRmluZ2VycHJpbnQpLFxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50c1dhdGNoZXIgPSBjb250cm9sbGVyLmNoYW5nZVdhdGNoZXIoY29udHJvbGxlci5hbGxFdmVudHMsIGNvbnRyb2xsZXIuZXZlbnRGaW5nZXJwcmludCksXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0T3B0aW9ucygpe1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjYWxlbmRhclNldHRpbmdzID0gYXR0cnMudWlDYWxlbmRhciA/IHNjb3BlLiRwYXJlbnQuJGV2YWwoYXR0cnMudWlDYWxlbmRhcikgOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZnVsbENhbGVuZGFyQ29uZmlnO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdWxsQ2FsZW5kYXJDb25maWcgPSBjb250cm9sbGVyLmdldEZ1bGxDYWxlbmRhckNvbmZpZyhjYWxlbmRhclNldHRpbmdzLCB1aUNhbGVuZGFyQ29uZmlnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2FsZUZ1bGxDYWxlbmRhckNvbmZpZyA9IGNvbnRyb2xsZXIuZ2V0TG9jYWxlQ29uZmlnKGZ1bGxDYWxlbmRhckNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5leHRlbmQobG9jYWxlRnVsbENhbGVuZGFyQ29uZmlnLCBmdWxsQ2FsZW5kYXJDb25maWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSB7IGV2ZW50U291cmNlczogc291cmNlcyB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGFuZ3VsYXIuZXh0ZW5kKG9wdGlvbnMsIGxvY2FsZUZ1bGxDYWxlbmRhckNvbmZpZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9yZW1vdmUgY2FsZW5kYXJzIGZyb20gb3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuY2FsZW5kYXJzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMyID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBvIGluIG9wdGlvbnMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihvICE9PSAnZXZlbnRTb3VyY2VzJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zMltvXSA9IG9wdGlvbnNbb107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KG9wdGlvbnMyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGVzdHJveSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGVuZGFyICYmIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ2Rlc3Ryb3knKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihhdHRycy5jYWxlbmRhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXIgPSB1aUNhbGVuZGFyQ29uZmlnLmNhbGVuZGFyc1thdHRycy5jYWxlbmRhcl0gPSAkKGVsbSkuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxlbmRhciA9ICQoZWxtKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgc2NvcGUuaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXIuZnVsbENhbGVuZGFyKG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGF0dHJzLmNhbGVuZGFyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVpQ2FsZW5kYXJDb25maWcuY2FsZW5kYXJzW2F0dHJzLmNhbGVuZGFyXSA9IGNhbGVuZGFyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50U291cmNlc1dhdGNoZXIub25BZGRlZCA9IGZ1bmN0aW9uKHNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcignYWRkRXZlbnRTb3VyY2UnLCBzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZXNDaGFuZ2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZXZlbnRTb3VyY2VzV2F0Y2hlci5vblJlbW92ZWQgPSBmdW5jdGlvbihzb3VyY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ3JlbW92ZUV2ZW50U291cmNlJywgc291cmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBzb3VyY2VzQ2hhbmdlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50U291cmNlc1dhdGNoZXIub25DaGFuZ2VkID0gZnVuY3Rpb24oc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc291cmNlICsgJyBjaGFuZ2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXIuZnVsbENhbGVuZGFyKCdyZWZldGNoRXZlbnRzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc291cmNlc0NoYW5nZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBldmVudHNXYXRjaGVyLm9uQWRkZWQgPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGVuZGFyLmZ1bGxDYWxlbmRhcigncmVuZGVyRXZlbnQnLCBldmVudCwgKGV2ZW50LnN0aWNrID8gdHJ1ZSA6IGZhbHNlKSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50c1dhdGNoZXIub25SZW1vdmVkID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxlbmRhci5mdWxsQ2FsZW5kYXIoJ3JlbW92ZUV2ZW50cycsIGV2ZW50Ll9pZCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGV2ZW50c1dhdGNoZXIub25DaGFuZ2VkID0gZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBldmVudC5fc3RhcnQgPSBqUXVlcnkuZnVsbENhbGVuZGFyLm1vbWVudChldmVudC5zdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuX2VuZCA9IGpRdWVyeS5mdWxsQ2FsZW5kYXIubW9tZW50KGV2ZW50LmVuZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsZW5kYXIuZnVsbENhbGVuZGFyKCd1cGRhdGVFdmVudCcsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgZXZlbnRTb3VyY2VzV2F0Y2hlci5zdWJzY3JpYmUoc2NvcGUpO1xyXG4gICAgICAgICAgICAgICAgZXZlbnRzV2F0Y2hlci5zdWJzY3JpYmUoc2NvcGUsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzb3VyY2VzQ2hhbmdlZCA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzQ2hhbmdlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UgdG8gcHJldmVudCBvbkFkZGVkL1JlbW92ZWQvQ2hhbmdlZCBoYW5kbGVycyBmcm9tIGZpcmluZyBpbiB0aGlzIGNhc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaChnZXRPcHRpb25zLCBmdW5jdGlvbihuZXdPLG9sZE8pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld08sb2xkTyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2NvcGUuZGVzdHJveSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlLmluaXQoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1dKTtcclxuXHJcbiAgICBpZihkZWJ1Zyl7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3VpQ2FsZW5kYXIgZGVmaW5lZCcpO1xyXG4gICAgfVxyXG5cclxufSgpKTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiogRU5EIE9GIEZJTEUgLSB1aS5jYWxlbmRhci5jb250cm9sbGVyLmpzXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cbi8qISoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqXHJcbiAqKiBGaWxlbmFtZSAgICA6IHNhbXBsZXMuY29udHJvbGxlci5qc1xyXG4gKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuKGZ1bmN0aW9uICgpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvLyBzYW1wbGVzQ29udHJvbGxlciBGdW5jdGlvblxyXG4gICAgdmFyIHNhbXBsZXNDb250cm9sbGVyID0gZnVuY3Rpb24oJHNjb3BlLCAkbW9kYWwsIHNhbXBsZXNTZXJ2aWNlKXtcclxuXHJcbiAgICAgICAgaWYoZGVidWcpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnc2FtcGxlc0NvbnRyb2xsZXIgYWN0aXZhdGVkJyk7XHJcbiAgICAgICAgfSAgICBcclxuXHJcbiAgICAgICAgdmFyIHZtID0gJHNjb3BlO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gc2FtcGxlc3MgY29sbGVjdGlvblxyXG4gICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuICAgICAgICB2bS5pbml0ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdm0uc2FtcGxlcyA9IFtdO1xyXG4gICAgICAgICAgICB2bS5zYW1wbGVzQ2F0cyA9IFtdO1xyXG4gICAgICAgICAgICB2bS5zb3J0T3JkZXIgPSAnaWQnO1xyXG4gICAgICAgICAgICB2bS5zYW1wbGVzID0gdm0uZ2V0QWxsVigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIEdFVCBBbGwgc2FtcGxlc1xyXG4gICAgICAgIHZtLmdldEFsbFYgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzYW1wbGVzU2VydmljZS5zcnZjR2V0QWxsc2FtcGxlcygpXHJcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKXtcclxuICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgIHZtLnNhbXBsZXMgPSByZXNwb25zZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOdW1iZXIgb2Ygc2FtcGxlcyByZXR1cm5lZCA9IFsnICsgdm0uc2FtcGxlcy5sZW5ndGggKyAnXScpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpe1xyXG4gICAgICAgICAgICAgICAgLy8gZXJyb3JcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFUlJPUjonICsgZXJyKTtcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24obXNnKXtcclxuICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2VcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgdm0uc2FtcGxlc0NhdHMgPSBfLnVuaXEoXy5wbHVjayh2bS5zYW1wbGVzLCAnY2F0ZWdvcnknKSk7XHJcbiAgICAgICAgICAgICAgICAvL3ZtLnNhbXBsZXNDYXRzID0gc2FtcGxlc1NlcnZpY2UuZ2V0c2FtcGxlc0NhdHMoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmKGRlYnVnICYmICh2bS5zYW1wbGVzLmxlbmd0aCAhPSAwKSApe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NhbXBsZXNDb250cm9sbGVyIHNhbXBsZXMoJyArIHZtLnNhbXBsZXMubGVuZ3RoICsgJyknKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmluaXQoKTtcclxuXHJcbiAgICAgICAgdm0uYWRkc2FtcGxlcyA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICRtb2RhbC5vcGVuKHtcclxuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnL3BhcnRpYWxzL3NhbXBsZXMvYWRkc2FtcGxlcy5odG1sJyxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdzYW1wbGVzQ29udHJvbGxlcidcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBtb2RhbEluc3RhbmNlLnJlc3VsdC50aGVuKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzXHJcbiAgICAgICAgICAgICAgICB2bS5nZXRBbGxWKCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycil7XHJcbiAgICAgICAgICAgICAgICAvLyBlcnJvclxyXG4gICAgICAgICAgICAgICAgdm0uZ2V0QWxsVigpO1xyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbihtc2cpe1xyXG4gICAgICAgICAgICAgICAgLy8gbWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdm0ubW9kaWZ5RGF0YSA9IGZhbHNlO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLmVkaXRzYW1wbGVzID0gZnVuY3Rpb24oc2FtcGxlcyl7XHJcbiAgICAgICAgICAgIHZtLm1vZGlmeURhdGEgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZihjb25maXJtKCdEbyB5b3Ugd2FudCB0byBzYXZlIHRoZSBjaGFuZ2VzPycpKXtcclxuICAgICAgICAgICAgICAgIHNhbXBsZXNTZXJ2aWNlLnNydmNFZGl0c2FtcGxlcyhzYW1wbGVzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2Upe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHN1Y2Nlc3NcclxuICAgICAgICAgICAgICAgICAgICB2bS5nZXRBbGxWKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SOicgKyBlcnIpO1xyXG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24obXNnKXtcclxuICAgICAgICAgICAgICAgICAgICAvLyBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2bS5tb2RpZnlEYXRhID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0uZGVsc2FtcGxlcyA9IGZ1bmN0aW9uKGlkKXtcclxuICAgICAgICAgICAgdm0ubW9kaWZ5RGF0YSA9IHRydWU7XHJcbiAgICAgICAgICAgIGlmKGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBERUxFVEUgdGhpcyBzYW1wbGVzPycpKXtcclxuICAgICAgICAgICAgICAgIGlmKHNhbXBsZXNTZXJ2aWNlLnNydmNEZWxzYW1wbGVzKGlkKSA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2FtcGxlcyBJZCBbJyArIGlkICsgJ10gaGFzIGJlZW4gZGVsZXRlZCEnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0VSUk9SOiBzYW1wbGVzIElkIFsnICsgaWQgKyAnXSBoYXMgTk9UIGJlZW4gZGVsZXRlZCEnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2bS5tb2RpZnlEYXRhID0gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdm0ubW9kaWZ5RGF0YSA9IGZhbHNlO1xyXG5cclxuICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbiAgICAgICAgLy8gdWktZ3JpZCBvcHRpb25zXHJcbiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuICAgICAgICB2bS5ncmlkT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgZW5hYmxlQ29sdW1uUmVzaXppbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGVuYWJsZVNvcnRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIHJvd0hlaWdodDoxMDAsXHJcbiAgICAgICAgICAgIGNvbHVtbkRlZnM6IFtcclxuICAgICAgICAgICAgICAgIHtmaWVsZDogJ2ltZycsIGNlbGxUZW1wbGF0ZTonPGltZyB3aWR0aD1cXCcxMjBweFxcJyBuZy1zcmM9XFwne3tncmlkLmdldENlbGxWYWx1ZShyb3csIGNvbCl9fVxcJyBsYXp5LXNyYz4nIH0sXHJcbiAgICAgICAgICAgICAgICB7ZmllbGQ6ICduYW1lJywgZGlzcGxheU5hbWU6ICdOYW1lJ30sXHJcbiAgICAgICAgICAgICAgICB7ZmllbGQ6ICdjYXRlZ29yeScsIGRpc3BsYXlOYW1lOiAnQ2F0ZWdvcnknfSxcclxuICAgICAgICAgICAgICAgIHtuYW1lOiAnZWRpdCcsIGRpc3BsYXlOYW1lOiAnRWRpdCcsIFxyXG4gICAgICAgICAgICAgICAgICAgIGNlbGxUZW1wbGF0ZTogJzxidXR0b24gaWQ9XCJlZGl0QnRuXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuLXNtYWxsXCIgbmctY2xpY2s9XCJlZGl0KHJvdy5lbnRpdHkpXCIgPkVkaXQ8L2J1dHRvbj4gJ31cclxuICAgICAgICAgICBdICAgIFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZtLnJvd0NvbG9yID0gWydjeWFuJywgJ2NyZWFtJ107XHJcblxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcgc2FtcGxlcyA9ICcsIHZtLnNhbXBsZXMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCcjc2FtcGxlcyA9ICcsIHZtLnNhbXBsZXMubGVuZ3RoKTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnIHNhbXBsZXNDYXRzID0gJywgdm0uc2FtcGxlc0NhdHMpO1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdcXG51aS1ncmlkLk9wdGlvbnMgPSAnLCB2bS5ncmlkT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiB2bTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gc2FtcGxlc0NvbnRyb2xsZXIgRGVmaW5pdG9uXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuY29udHJvbGxlcignc2FtcGxlc0NvbnRyb2xsZXInLCBbXHJcbiAgICAgICAgICAgICckc2NvcGUnLCBcclxuICAgICAgICAgICAgJyRtb2RhbCcsXHJcbiAgICAgICAgICAgICdzYW1wbGVzU2VydmljZScsXHJcbiAgICAgICAgICAgIHNhbXBsZXNDb250cm9sbGVyXSk7XHJcblxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzYW1wbGVzQ29udHJvbGxlciBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG59KCkpO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKiBFTkQgT0YgRklMRSAtIHNhbXBsZXMuY29udHJvbGxlci5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKlxyXG4gKiogRmlsZW5hbWUgICAgOiBkaXJlY3RpdmVzLmpzXHJcbiAqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4vLyBEZWZpbmUgeW91ciBkaXJlY3RpdmVzIGhlcmUuIFxyXG4vLyBEaXJlY3RpdmVzIGNhbiBiZSBhZGRlZCB0byBzYW1lIG1vZHVsZSBhcyB0aGUgbWFpbiAnYXBwJyBcclxuLy8gb3IgYSBzZXBlcmF0ZSBtb2R1bGUgY2FuIGJlIGNyZWF0ZWQuXHJcblxyXG4vKipcclxuICogQG5nZG9jIGRpcmVjdGl2ZVxyXG4gKiBAbmFtZSB1aS5ib290c3RyYXAuY2Fyb3VzZWwuZGlyZWN0aXZlOnNsaWRlXHJcbiAqIEByZXN0cmljdCBFQVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICogQ3JlYXRlcyBhIHNsaWRlIGluc2lkZSBhIHtAbGluayB1aS5ib290c3RyYXAuY2Fyb3VzZWwuZGlyZWN0aXZlOmNhcm91c2VsIGNhcm91c2VsfS4gIE11c3QgYmUgcGxhY2VkIGFzIGEgY2hpbGQgb2YgYSBjYXJvdXNlbCBlbGVtZW50LlxyXG4gKlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBhY3RpdmUgTW9kZWwgYmluZGluZywgd2hldGhlciBvciBub3QgdGhpcyBzbGlkZSBpcyBjdXJyZW50bHkgYWN0aXZlLlxyXG4gKiBAcGFyYW0ge251bWJlcj19IGluZGV4IFRoZSBpbmRleCBvZiB0aGUgc2xpZGUuIFRoZSBzbGlkZXMgd2lsbCBiZSBzb3J0ZWQgYnkgdGhpcyBwYXJhbWV0ZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbjxleGFtcGxlIG1vZHVsZT1cInVpLmJvb3RzdHJhcFwiPlxyXG4gICAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgICAgICA8ZGl2IG5nLWNvbnRyb2xsZXI9XCJDYXJvdXNlbERlbW9DdHJsXCI+XHJcbiAgICAgICAgICAgIDxjYXJvdXNlbD5cclxuICAgICAgICAgICAgICAgIDxzbGlkZSBuZy1yZXBlYXQ9XCJzbGlkZSBpbiBzbGlkZXNcIiBhY3RpdmU9XCJzbGlkZS5hY3RpdmVcIiBpbmRleD1cIiRpbmRleFwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgbmctc3JjPVwie3tzbGlkZS5pbWFnZX19XCIgc3R5bGU9XCJtYXJnaW46YXV0bztcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtY2FwdGlvblwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+U2xpZGUge3skaW5kZXh9fTwvaDQ+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxwPnt7c2xpZGUudGV4dH19PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9zbGlkZT5cclxuICAgICAgICAgICAgPC9jYXJvdXNlbD5cclxuICAgICAgICAgICAgSW50ZXJ2YWwsIGluIG1pbGxpc2Vjb25kczogPGlucHV0IHR5cGU9XCJudW1iZXJcIiBuZy1tb2RlbD1cIm15SW50ZXJ2YWxcIj5cclxuICAgICAgICAgICAgPGJyIC8+RW50ZXIgYSBuZWdhdGl2ZSBudW1iZXIgdG8gc3RvcCB0aGUgaW50ZXJ2YWwuXHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICA8L2ZpbGU+XHJcbiAgICA8ZmlsZSBuYW1lPVwic2NyaXB0LmpzXCI+XHJcbiAgICAgICAgZnVuY3Rpb24gQ2Fyb3VzZWxEZW1vQ3RybCgpIHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICAgICAgdm0ubXlJbnRlcnZhbCA9IDUwMDA7XHJcbiAgICAgICAgfVxyXG4gICAgPC9maWxlPlxyXG4gICAgPGZpbGUgbmFtZT1cImRlbW8uY3NzXCI+XHJcbiAgICAgICAgLmNhcm91c2VsLWluZGljYXRvcnMge1xyXG4gICAgICAgICAgICB0b3A6IGF1dG87XHJcbiAgICAgICAgICAgIGJvdHRvbTogMTVweDtcclxuICAgICAgICB9XHJcbiAgICA8L2ZpbGU+XHJcbjwvZXhhbXBsZT5cclxuKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgncGhvdG9GbGlwJyxcclxuICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIC8vdGVtcGxhdGVVUkw6ICdwYXJ0aWFscy9waG90b3MvcGhvdG8udGVzdC5odG1sJ1xyXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8ZGl2PlxcbjxpbnB1dCB0eXBlPVwidGV4dFwiIG5nLW1vZGVsPVwibW9kZWwuaW5wdXRcIj5cXG4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdj57e21vZGVsLmlucHV0fX08L2Rpdj5cXG4gICAgXFxuPC9kaXY+JyxcclxuICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uKHNjb3BlLCBlbGVtZW50KXtcclxuICAgICAgICAgICAgICAgICAgICBzY29wZS4kd2F0Y2goJ21vZGVsLmlucHV0JywgZnVuY3Rpb24odmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZih2YWx1ZSA9PT0gJ3Bhc3N3b3JkJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hhbmdlIHBhc3N3b3JkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jaGlsZHJlbigxKS50b2dnbGVDbGFzcygnYWxlcnQtYm94IGFsZXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGlmKGRlYnVnKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnZGlyZWN0aXZlKFwicGhvdG9GbGlwXCIpIGRlZmluZWQnKTtcclxuICAgIH0gICAgXHJcblxyXG4vLyAgICAvLyBDYXJvdXNlbCBEaXJlY3RpdmVcclxuLy8gICAgYW5ndWxhclxyXG4vLyAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuLy8gICAgICAgIC5kaXJlY3RpdmUoJ2Nhcm91c2VsJywgXHJcbi8vICAgICAgICBmdW5jdGlvbigpIHtcclxuLy8gICAgICAgICAgICByZXR1cm4ge1xyXG4vLyAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuLy8gICAgICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuLy8gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuLy8gICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3Bob3Rvc0NvbnRyb2xsZXInLFxyXG4vLyAgICAgICAgICAgICAgICByZXF1aXJlOiAnY2Fyb3VzZWwnLFxyXG4vLyAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ3BhcnRpYWxzL2Nhcm91c2VsL2Nhcm91c2VsLmh0bWwnLFxyXG4vLyAgICAgICAgICAgICAgICBzY29wZToge1xyXG4vLyAgICAgICAgICAgICAgICBpbnRlcnZhbDogJz0nLFxyXG4vLyAgICAgICAgICAgICAgICBub1RyYW5zaXRpb246ICc9JyxcclxuLy8gICAgICAgICAgICAgICAgbm9QYXVzZTogJz0nXHJcbi8vICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgfVxyXG4vLyAgICApO1xyXG4vL1xyXG4vLyAgICBpZihkZWJ1Zyl7XHJcbi8vICAgICAgICBjb25zb2xlLmxvZyhcImRpcmVjdGl2ZSgnY2Fyb3VzZWwnKSBkZWZpbmVkXCIpO1xyXG4vLyAgICB9ICAgIFxyXG4vL1xyXG4vLyAgICBhbmd1bGFyXHJcbi8vICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4vLyAgICAgICAgLmRpcmVjdGl2ZSgnc2xpZGUnLCBcclxuLy8gICAgICAgIGZ1bmN0aW9uKCkge1xyXG4vLyAgICAgICAgICAgIHJldHVybiB7XHJcbi8vICAgICAgICAgICAgICAgIHJlcXVpcmU6ICdeY2Fyb3VzZWwnLFxyXG4vLyAgICAgICAgICAgICAgICByZXN0cmljdDogJ0VBJyxcclxuLy8gICAgICAgICAgICAgICAgdHJhbnNjbHVkZTogdHJ1ZSxcclxuLy8gICAgICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZSxcclxuLy8gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdwYXJ0aWFscy9jYXJvdXNlbC9zbGlkZS5odG1sJyxcclxuLy8gICAgICAgICAgICAgICAgc2NvcGU6IHtcclxuLy8gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogJz0/JyxcclxuLy8gICAgICAgICAgICAgICAgICAgIGluZGV4OiAnPT8nXHJcbi8vICAgICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cnMsIGNhcm91c2VsQ3RybCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgY2Fyb3VzZWxDdHJsLmFkZFNsaWRlKHNjb3BlLCBlbGVtZW50KTtcclxuLy8gICAgICAgICAgICAgICAgICAgIC8vd2hlbiB0aGUgc2NvcGUgaXMgZGVzdHJveWVkIHRoZW4gcmVtb3ZlIHRoZSBzbGlkZSBmcm9tIHRoZSBjdXJyZW50IHNsaWRlcyBhcnJheVxyXG4vLyAgICAgICAgICAgICAgICAgICAgc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIGNhcm91c2VsQ3RybC5yZW1vdmVTbGlkZShzY29wZSk7XHJcbi8vICAgICAgICAgICAgICAgICAgICB9KTtcclxuLy9cclxuLy8gICAgICAgICAgICAgICAgICAgIHNjb3BlLiR3YXRjaCgnYWN0aXZlJywgZnVuY3Rpb24oYWN0aXZlKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXJvdXNlbEN0cmwuc2VsZWN0KHNjb3BlKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgIH07XHJcbi8vICAgICAgICB9XHJcbi8vICAgICk7XHJcbi8vXHJcbi8vICAgIGlmKGRlYnVnKXtcclxuLy8gICAgICAgIGNvbnNvbGUubG9nKFwiZGlyZWN0aXZlKCdzbGlkZScpIGRlZmluZWRcIik7XHJcbi8vICAgIH0gICAgXHJcbi8vXHJcbi8vICAgIGFuZ3VsYXJcclxuLy8gICAgICAgIC5tb2R1bGUoJ2FwcCcpXHJcbi8vICAgICAgICAuYW5pbWF0aW9uKCcuaXRlbScsIFxyXG4vLyAgICAgICAgWyckYW5pbWF0ZSddLFxyXG4vLyAgICAgICAgZnVuY3Rpb24gKCRhbmltYXRlKSB7XHJcbi8vICAgICAgICAgICAgcmV0dXJuIHtcclxuLy8gICAgICAgICAgICAgICAgYmVmb3JlQWRkQ2xhc3M6IGZ1bmN0aW9uIChlbGVtZW50LCBjbGFzc05hbWUsIGRvbmUpIHtcclxuLy8gICAgICAgICAgICAgICAgICAgIC8vIER1ZSB0byB0cmFuc2NsdXNpb24sIG5vVHJhbnNpdGlvbiBwcm9wZXJ0eSBpcyBvbiBwYXJlbnQncyBzY29wZVxyXG4vLyAgICAgICAgICAgICAgICAgICAgaWYgKGNsYXNzTmFtZSA9PSAnYWN0aXZlJyAmJiBlbGVtZW50LnBhcmVudCgpICYmXHJcbi8vICAgICAgICAgICAgICAgICAgICAhZWxlbWVudC5wYXJlbnQoKS5zY29wZSgpLm5vVHJhbnNpdGlvbikge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdG9wcGVkID0gZmFsc2U7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGVsZW1lbnQuaXNvbGF0ZVNjb3BlKCkuZGlyZWN0aW9uO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25DbGFzcyA9IGRpcmVjdGlvbiA9PSAnbmV4dCcgPyAnbGVmdCcgOiAncmlnaHQnO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoZGlyZWN0aW9uKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCBkaXJlY3Rpb25DbGFzcykudGhlbihmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RvcHBlZCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhkaXJlY3Rpb25DbGFzcyArICcgJyArIGRpcmVjdGlvbik7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICAgICBkb25lKCk7XHJcbi8vICAgICAgICAgICAgICAgIH0sXHJcbi8vICAgICAgICAgICAgICAgIGJlZm9yZVJlbW92ZUNsYXNzOiBmdW5jdGlvbiAoZWxlbWVudCwgY2xhc3NOYW1lLCBkb25lKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAvLyBEdWUgdG8gdHJhbnNjbHVzaW9uLCBub1RyYW5zaXRpb24gcHJvcGVydHkgaXMgb24gcGFyZW50J3Mgc2NvcGVcclxuLy8gICAgICAgICAgICAgICAgICAgIGlmIChjbGFzc05hbWUgPT0gJ2FjdGl2ZScgJiYgZWxlbWVudC5wYXJlbnQoKSAmJlxyXG4vLyAgICAgICAgICAgICAgICAgICAgIWVsZW1lbnQucGFyZW50KCkuc2NvcGUoKS5ub1RyYW5zaXRpb24pIHtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcHBlZCA9IGZhbHNlO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSBlbGVtZW50Lmlzb2xhdGVTY29wZSgpLmRpcmVjdGlvbjtcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGlyZWN0aW9uQ2xhc3MgPSBkaXJlY3Rpb24gPT0gJ25leHQnID8gJ2xlZnQnIDogJ3JpZ2h0JztcclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAkYW5pbWF0ZS5hZGRDbGFzcyhlbGVtZW50LCBkaXJlY3Rpb25DbGFzcykudGhlbihmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc3RvcHBlZCkge1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5yZW1vdmVDbGFzcyhkaXJlY3Rpb25DbGFzcyk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9uZSgpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3BwZWQgPSB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbi8vICAgICAgICAgICAgICAgICAgICB9XHJcbi8vICAgICAgICAgICAgICAgICAgICBkb25lKCk7XHJcbi8vICAgICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICAgICB9O1xyXG4vLyAgICAgICAgfVxyXG4vLyAgICApO1xyXG4vLyBcclxuLy8gICAgaWYoZGVidWcpe1xyXG4vLyAgICAgICAgY29uc29sZS5sb2coXCIkYW5pbWF0ZSBmdW5jdGlvbiBkZWZpbmVkXCIpO1xyXG4vLyAgICB9XHJcblxyXG59KCkpO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAbmdkb2MgZGlyZWN0aXZlXHJcbiAqIEBuYW1lIHVpLmJvb3RzdHJhcC5jYXJvdXNlbC5kaXJlY3RpdmU6Y2Fyb3VzZWxcclxuICogQHJlc3RyaWN0IEVBXHJcbiAqXHJcbiAqIEBkZXNjcmlwdGlvblxyXG4gKiBDYXJvdXNlbCBpcyB0aGUgb3V0ZXIgY29udGFpbmVyIGZvciBhIHNldCBvZiBpbWFnZSAnc2xpZGVzJyB0byBzaG93Y2FzZS5cclxuICpcclxuICogQHBhcmFtIHtudW1iZXI9fSBpbnRlcnZhbCBUaGUgdGltZSwgaW4gbWlsbGlzZWNvbmRzLCB0aGF0IGl0IHdpbGwgdGFrZSBcclxuICogICAgIHRoZSBjYXJvdXNlbCB0byBnbyB0byB0aGUgbmV4dCBzbGlkZS5cclxuICogQHBhcmFtIHtib29sZWFuPX0gbm9UcmFuc2l0aW9uIFdoZXRoZXIgdG8gZGlzYWJsZSB0cmFuc2l0aW9ucyBvbiB0aGUgXHJcbiAqICAgICBjYXJvdXNlbC5cclxuICogQHBhcmFtIHtib29sZWFuPX0gbm9QYXVzZSBXaGV0aGVyIHRvIGRpc2FibGUgcGF1c2luZyBvbiB0aGUgY2Fyb3VzZWwgXHJcbiAqICAgIChieSBkZWZhdWx0LCB0aGUgY2Fyb3VzZWwgaW50ZXJ2YWwgcGF1c2VzIG9uIGhvdmVyKS5cclxuICpcclxuICogQGV4YW1wbGVcclxuPGV4YW1wbGUgbW9kdWxlPVwidWkuYm9vdHN0cmFwXCI+XHJcbiAgPGZpbGUgbmFtZT1cImluZGV4Lmh0bWxcIj5cclxuICAgIDxjYXJvdXNlbD5cclxuICAgICAgPHNsaWRlPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiaHR0cDovL3BsYWNla2l0dGVuLmNvbS8xNTAvMTUwXCIgc3R5bGU9XCJtYXJnaW46YXV0bztcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtY2FwdGlvblwiPlxyXG4gICAgICAgICAgPHA+QmVhdXRpZnVsITwvcD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgPC9zbGlkZT5cclxuICAgICAgPHNsaWRlPlxyXG4gICAgICAgIDxpbWcgc3JjPVwiaHR0cDovL3BsYWNla2l0dGVuLmNvbS8xMDAvMTUwXCIgc3R5bGU9XCJtYXJnaW46YXV0bztcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtY2FwdGlvblwiPlxyXG4gICAgICAgICAgPHA+RCdhd3chPC9wPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICA8L3NsaWRlPlxyXG4gICAgPC9jYXJvdXNlbD5cclxuICA8L2ZpbGU+XHJcbiAgPGZpbGUgbmFtZT1cImRlbW8uY3NzXCI+XHJcbiAgICAuY2Fyb3VzZWwtaW5kaWNhdG9ycyB7XHJcbiAgICAgIHRvcDogYXV0bztcclxuICAgICAgYm90dG9tOiAxNXB4O1xyXG4gICAgfVxyXG4gIDwvZmlsZT5cclxuPC9leGFtcGxlPlxyXG4qL1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKiBFTkQgT0YgRklMRSAtIHRlc3QuZGlyZWN0aXZlLmpzXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyohKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKipcclxuICoqIEZpbGVuYW1lICAgIDogZmlsdGVycy5qc1xyXG4gKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4vKmpzaGludCAtVzEwOSAqLyAvLyBpZ25vcmUgZG91YmxlLXF1b3RlcyBpbiBiZXR3ZWVuIHNpbmdsZS1xdW90ZXNcclxuXHJcbihmdW5jdGlvbiAoZGVidWcpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuZmlsdGVyKCdub051bGxzJywgZnVuY3Rpb24oUGhvdG9zKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgdmFyIGZpbHRlcmVkUGhvdG9zID0gW107XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmKFBob3Rvcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPFBob3Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggUGhvdG9zW2ldLm5hbWUgIT09ICcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcmVkUGhvdG9zLnB1c2goUGhvdG9zW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnZmlsdGVyZWRQaG90b3MgZnJvbSBub051bGxzJyApO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coIGZpbHRlcmVkUGhvdG9zICk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmlsdGVyZWRQaG90b3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG4gICAgICAgIFxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmaWx0ZXIoXCJub051bGxzXCIpIGRlZmluZWQnKTtcclxuICAgIH1cclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnYXBwJylcclxuICAgICAgICAuZmlsdGVyKCdoaWxpZ2h0cycsIGZ1bmN0aW9uKFBob3Rvcykge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHZhciBmaWx0ZXJlZFBob3RvcyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKFBob3Rvcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPFBob3Rvcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggUGhvdG9zW2ldLmhpbGlnaHQgPT0gMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJlZFBob3Rvcy5wdXNoKFBob3Rvc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggJ2ZpbHRlcmVkUGhvdG9zIGZyb20gaGlsaWdodHMnICk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyggZmlsdGVyZWRQaG90b3MgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmaWx0ZXJlZFBob3RvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgaWYoZGVidWcpe1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdmaWx0ZXIoXCJoaWxpZ2h0c1wiKSBkZWZpbmVkJyk7XHJcbiAgICB9XHJcblxyXG59KCkpO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKiBFTkQgT0YgRklMRSAtIGZpbHRlci5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXG4vKiEqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKlxyXG4gKiogRmlsZW5hbWUgICAgOiBzYW1wbGVzLnNlcnZpY2UuanNcclxuICoqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcpO1xyXG5cclxuXHJcbiAgICAvLyBzYW1wbGVzU2VydmljZSBGdW5jdGlvblxyXG4gICAgdmFyIHNhbXBsZXNTZXJ2aWNlID0gZnVuY3Rpb24oJGh0dHAsICRxKXtcclxuXHJcbiAgICAgICAgdmFyIHNlcnZpY2UgPSB7XHJcbiAgICAgICAgICAgIHNhbXBsZXM6IFtdLFxyXG4gICAgICAgICAgICBzYW1wbGVDYXRzOiBbXSxcclxuICAgICAgICAgICAgc3J2Y0dldEFsbHNhbXBsZXM6IHNydmNHZXRBbGxzYW1wbGVzLFxyXG4gICAgICAgICAgICBzcnZjR2V0c2FtcGxlQ2F0czogc3J2Y0dldHNhbXBsZUNhdHMsXHJcbiAgICAgICAgICAgIHNydmNHZXRTZWxlY3RlZEluZGV4OiBzcnZjR2V0U2VsZWN0ZWRJbmRleCxcclxuICAgICAgICAgICAgc3J2Y0dldEFzYW1wbGU6IHNydmNHZXRBc2FtcGxlLFxyXG4gICAgICAgICAgICBzcnZjQWRkc2FtcGxlOiBzcnZjQWRkc2FtcGxlLFxyXG4gICAgICAgICAgICBzcnZjRWRpdHNhbXBsZTogc3J2Y0VkaXRzYW1wbGUsXHJcbiAgICAgICAgICAgIHNydmNEZWxzYW1wbGU6IHNydmNEZWxzYW1wbGVcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBHRVQgYWxsIHNhbXBsZXNcclxuICAgICAgICBmdW5jdGlvbiBzcnZjR2V0QWxsc2FtcGxlcygpe1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xyXG4gICAgICAgICAgICAvLyBNYWtlIGNhbGwgdG8gUkVTVEZVTCBBUElcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCdqc29uL3NhbXBsZXMuanNvbicpXHJcbiAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5zYW1wbGVzID0gZGF0YTtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIsIHN0YXR1cyl7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoJ0ZhaWxlZCB0byBnZXQgc2FtcGxlcycpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzcnZjR2V0c2FtcGxlQ2F0cygpe1xyXG4gICAgICAgICAgICB2YXIgc2FtcGxlcyA9IHNlcnZpY2Uuc2FtcGxlcztcclxuICAgICAgICAgICAgdmFyIHNhbXBsZUNhdHMgPSAgW107XHJcbiAgICAgICAgICAgIGlmKCBzYW1wbGVzLmxlbmd0aCA8MSl7XHJcbiAgICAgICAgICAgICAgICBzYW1wbGVzID0gIHNydmNHZXRBbGxzYW1wbGVzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoIHNhbXBsZXMubGVuZ3RoID4wKXtcclxuICAgICAgICAgICAgICAgIHNhbXBsZUNhdHMgPSBfLnVuaXEoXy5wbHVjayhzYW1wbGVzLCAnY2F0ZWdvcnknKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgc2VydmljZS5zYW1wbGVzID0gc2FtcGxlcztcclxuICAgICAgICAgICAgc2VydmljZS5zYW1wbGVDYXRzID0gc2FtcGxlQ2F0cztcclxuICAgICAgICAgICAgcmV0dXJuIHNhbXBsZUNhdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBnZXQgdGhlIHNlbGVjdGVkIGluZGV4IGludG8gdGhlIGFycmF5XHJcbiAgICAgICAgZnVuY3Rpb24gc3J2Y0dldFNlbGVjdGVkSW5kZXgoaWQpe1xyXG4gICAgICAgICAgICBpZihpZCA+PSAwKXtcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpPHNlcnZpY2Uuc2FtcGxlcy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2VydmljZS5zYW1wbGVzW2ldLmlkID09IGlkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR0VUIGEgc2FtcGxlXHJcbiAgICAgICAgLy8gcGFzcyBpbiBhIHNhbXBsZSBJZCBhbmQgZ2V0IHRoZSBzYW1wbGUgcmVjb3JkXHJcbiAgICAgICAgZnVuY3Rpb24gc3J2Y0dldEFzYW1wbGUoaWQpe1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gc3J2Y0dldFNlbGVjdGVkSW5kZXgoaWQpO1xyXG4gICAgICAgICAgICBpZihpZHggIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2dldEFzYW1wbGUoJyArIGlkICsgJykoJyArIGlkeCArICcpID0gWycgKyBzZXJ2aWNlLnNhbXBsZXNbaWR4XS5uYW1lICsgJ10nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnNhbXBsZXNbaWR4XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdCgnc2FtcGxlIGNvdWxkIG5vdCBiZSBmb3VuZCEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFERFxyXG4gICAgICAgIGZ1bmN0aW9uIHNydmNBZGRzYW1wbGUoc2FtcGxlKXtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcclxuICAgICAgICAgICAgLy8gTWFrZSBjYWxsIHRvIFJFU1RGVUwgQVBJXHJcbiAgICAgICAgICAgICRodHRwLnBvc3QoJ2pzb24vc2FtcGxlcy5qc29uJywgc2FtcGxlKVxyXG4gICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmljZS5zYW1wbGVzID0gZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5lcnJvcihmdW5jdGlvbihlcnIsIHN0YXR1cyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KCdGYWlsZWQgdG8gYWRkIHNhbXBsZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVVBEQVRFXHJcbiAgICAgICAgLy8gcGFzcyBpbiBhIHNhbXBsZSByZWNvcmQgYW5kIHVwZGF0ZSB0aGUgZmllbGRzIHdpdGggdGhlIHZhbHVlc1xyXG4gICAgICAgIGZ1bmN0aW9uIHNydmNFZGl0c2FtcGxlKHNhbXBsZSl7XHJcbiAgICAgICAgICAgIHZhciBpZHggPSBzcnZjR2V0U2VsZWN0ZWRJbmRleChzYW1wbGUuaWQpO1xyXG4gICAgICAgICAgICBpZihpZHggIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRzYW1wbGUoJyArIGlkICsgJykoJyArIGlkeCArICcpIGNoYW5nZWQ6Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZWRpdHNhbXBsZSggLS0tIG5hbWUgICAgIFsnICsgc2VydmljZS5zYW1wbGVzW2lkeF0ubmFtZSArICddIGNoYW5nZWQgdG8gWycrIHNhbXBsZS5uYW1lICsgJ10nKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlZGl0c2FtcGxlKCAtLS0gaHJlZiAgICAgWycgKyBzZXJ2aWNlLnNhbXBsZXNbaWR4XS5ocmVmICsgJ10gY2hhbmdlZCB0byBbJysgc2FtcGxlLmhyZWYgKyAnXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRzYW1wbGUoIC0tLSBpbWcgICAgICBbJyArIHNlcnZpY2Uuc2FtcGxlc1tpZHhdLmltZyArICddIGNoYW5nZWQgdG8gWycrIHNhbXBsZS5pbWcgKyAnXScpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2VkaXRzYW1wbGUoIC0tLSBjYXRlZ29yeSBbJyArIHNlcnZpY2Uuc2FtcGxlc1tpZHhdLmNhdGVnb3J5ICsgJ10gY2hhbmdlZCB0byBbJysgc2FtcGxlLmNhdGVnb3J5ICsgJ10nKTtcclxuICAgICAgICAgICAgICAgIHNlcnZpY2Uuc2FtcGxlc1tpZHhdLm5hbWUgPSBzYW1wbGUubmFtZSA7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLnNhbXBsZXNbaWR4XS5ocmVmID0gc2FtcGxlLmhyZWYgO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5zYW1wbGVzW2lkeF0uaW1nID0gc2FtcGxlLmltZyA7XHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlLnNhbXBsZXNbaWR4XS5jYXRlZ29yeSA9IHNhbXBsZS5jYXRlZ29yeSA7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBzYW1wbGUgaW5kZXggWycgKyBpZHggKyAnXScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzZXJ2aWNlLnNhbXBsZXNbaWR4XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIERFTEVURVxyXG4gICAgICAgIGZ1bmN0aW9uIHNydmNEZWxzYW1wbGUoaWQpe1xyXG4gICAgICAgICAgICB2YXIgaWR4ID0gc3J2Y0dldFNlbGVjdGVkSW5kZXgoaWQpO1xyXG4gICAgICAgICAgICBpZihpZHggIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbHNhbXBsZSgnICsgaWQgKyAnKSgnICsgaWR4ICsgJykgZGVsZXRlZDonKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxzYW1wbGUoIC0tLSBuYW1lICAgICBbJyArIHNlcnZpY2Uuc2FtcGxlc1tpZHhdLm5hbWUgICAgICsgJ10gZGVsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RlbHNhbXBsZSggLS0tIGhyZWYgICAgIFsnICsgc2VydmljZS5zYW1wbGVzW2lkeF0uaHJlZiAgICAgKyAnXSBkZWxldGVkJyk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZGVsc2FtcGxlKCAtLS0gaW1nICAgICAgWycgKyBzZXJ2aWNlLnNhbXBsZXNbaWR4XS5pbWcgICAgICArICddIGRlbGV0ZWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdkZWxzYW1wbGUoIC0tLSBjYXRlZ29yeSBbJyArIHNlcnZpY2Uuc2FtcGxlc1tpZHhdLmNhdGVnb3J5ICsgJ10gZGVsZXRlZCcpO1xyXG4gICAgICAgICAgICAgICAgc2VydmljZS5zYW1wbGVzLnNwbGljZShpZHgsMSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW52YWxpZCBzYW1wbGUgaW5kZXggWycgKyBpZHggKyAnXScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBzYW1wbGVzU2VydmljZSBEZWZpbml0b25cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdhcHAnKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdzYW1wbGVzU2VydmljZScsIFtcclxuICAgICAgICAgICAgJyRodHRwJywgXHJcbiAgICAgICAgICAgICckcScsXHJcbiAgICAgICAgICAgIHNhbXBsZXNTZXJ2aWNlXSk7XHJcblxyXG59KCkpO1xyXG5cclxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbiAqKiBFTkQgT0YgRklMRSAtIHNhbXBsZXMuc2VydmljZS5qc1xyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuIl19
